# Section 11.5 MySQL Database

# UNIX Connect to Database, execute SQL script

```sh '
Mysql-u root-p
# Since FileName.sql
````

# Create a database

``sql
/Create data db_name;
````

- 'db_name ' : Database name

Database names are case-sensitive, with a maximum of 64 characters, with a maximum of 256 characters, and no database keyword can be used.

Rename Database

``sql
No, no, no, no, no, no.
````

- `old_name ' : Old database name
- 'new_name ' : new database name


# View the database

``sql
So, show data;
````


# Into the database

``sql
Use db_name;
````

- 'db_name ' : Database name

# Delete the database

``sql
No, no, no.
````

- 'db_name ' : Database name

# Change database character set

``sql
It's not like you're going to be able to use it.
If you're going to be able to do this, you're going to have to do it.
````

# SQL data type

- `tinyint ' (1B), `smallint ' (2B), `mediant ' (3B), `int ' (4B), `bigint ' (8B)
- `float ' (4B), `double ' (8B), `decimal (total, decimal) '
- `char ' is a character type that wants to save a string with `char ' (number of characters) '
- `unsigned + data type ' can be set to unsigned data type.

# Create Table

``sql
Create table table_name
I don't know.
I don't know.
Column_namedata_ type
(b) ;
````

- `table_name ' : Table name
- `column_name`: listing
- 'data_ type ' : data type

# Watch rename

``sql
I mean, it's just that, uh, it's just that, uh, it's just that, uh, it's just that, uh, it's just that, uh, it's just that, uh...
````

- 'old_name ' : Old watch name
- 'new_name ': new name

# See what tables in the database

``sql
I don't know.
````


# Show table structure

``sql
I don't know.
````


# Show all information in the table (select later)

``sql
♪ From battles; ♪
````

# SQL Syntax: Comment

``sql
--Note will not be executed
````

It's a good habit to write scripts and notes, so you don't know what you wrote for a while...

# Primary key, unique, not empty, automatic numbering

``sql
Create table name
I don't know.
- Primary Key
Name data type
One.
List (20) unique,
Don't be empty.
The data type.
-- Autonumbering
Listing Data Type
(b) ;
````

# Information written to table

``sql
Insert into table_name (col1, col2) values (123, "Li Ming");
````

- `col1 ' : Listing 1
- `col2 ' : Listing 2

# New Table Add

``sql
Alter table table_name
I don't know.
````

- `new_col ' : new listing
- 'data_ type ' : data type

# Table delete column

``sql
Alter table name drop;
````

# The table changes the column type

``sql
I'm sorry, it's not like I'm gonna be able to do this, until table table _name mobile cl_name new_data_ type;
````

- 'new_data_type ' : new data type


# The table adds the main key

``sql
Alter table table_name
(b) Add primaly key (col_name);
````

- `col_name ' : new listing

# The table removes the primary key

``sql
I'm sorry, but I'm sorry.
````

# Unique constraints

# # The table adds a unique constraint

``sql
Alter table table_name
(b) Add construant_name unique (col_name);
````

- `constraint_name': unique binding name
- `col_name ' : listing

# The table removes the singularity constraint #

``sql
Alter table table_name
Drop index_name;
````

# External keys

# # The table adds external keys

``sql
ALTER TABLE table_name
ADD CONSTRAINT fk_column_name
FOREIGN KEY (fk_column)
REFERENCS tstu (sid);
````

- 'fk_name ': external key name
- `fk_col ' : external forms for listing

# The table removes the external key

``sql
Alter table table_name
"Drop foreign key fk_name"
````

- `table_name ' : sub-list name
- 'fk_name ': external key name

The concept of external keys


- Parental watch: Table quoted in external keys. The quoted column in the parent table is usually the primary key (PRIMARY KEY) or the only key (UNIQUE). Like the yellow table above.
- Subwatch: a table containing external keys. . The external column of the sub-table indicates the primary or only key to the parent table. For example, the green table above.

# # failed to remove parent table data

- Reason: The data are cited in the sub-table.
- Settlement: Use `ON DELETE CASCADE ' or delete the records from the sub-table.
- `ON DELETE CASCADE ' , another set of contents, omitted. See [three chapters down] (# # auto-maintenance of the reference integrity between the parent and the child tables).

# Here's an example of a parent, child table and external key

``sql
--Creating ParentCustomers
CREATE TABLE CUSTOMS
id INT AUTO_INCREMENT PRIMARY KEY, -- master key, automatic numbering
Name Varchar(100) NOT NULL, -- client name
email Varchar(150) UNIQUE -- Only email
(b) ;

-- Creating Subwatches
CREATE TABLE ORERS
order number
order_date DATE NOT NULL, -- order date
control_id INT, -- external bar, associated client ID
amount DECIMAL (10, 2) -- order amount
FOREIGN KEY (customer_id) REFERENCES standards(id) - Define external keys
ON DELETE CASCADE - When the parent chart is deleted, the cascade removes the relevant records of the sub-table
ON UPDATE CASCADE - Automatically update the parent key when it is updated
(b) ;
````

1. Creation of fatherhood forms:
Include columns:
id: Primary key, for unique identification of customers.
Name: The client's name.
email: Only restricted e-mail address to prevent repetition.
2. Creation of sub-watches
Order_id: Primary key, for the single identification order.
Order_date: Record the date of the order.
Customer_id: external key bar for associated customers.
amount: order amount.
3. Set external keys:
`FOREIGN KEY (customer_id) REFERENCES customers(id) ' denotes the id column of the child table in which the parent table is quoted.
`ON DELETE CASCADE ' will also be deleted if the parent record is deleted.
`ON UPDATE CASCADE ' automatically updates the extra-watch column when the parent key is updated.

# Modify column data type

````
ALTER TABLE Table Name
(b) The type of new data listed by MODIFY COLUMN;

-- e.g. (reset data type not to be empty, set default)
ALTER TABLE book_table
MODIFY COLUMN BookName CHAR(100) NOT NULL DEFAULT;

-- If the column that is modified is external, the external key constraint must first be removed, then the data type modified and the external key re-added
Alter table drop FOREIGN KEY
Alter table modify column listing new data types;
Atter table sub-form add key name FOREIGN KEY (listed) REFERENCES parent name (father listed);
````

# Modify table information, delete rows

````
- Modify Table Information
Update Table Name
set = new value
Where conditions;
````

Note: Set you have selected an entire column, and if you want to modify the value of a single or more position, you need to limit it by where you want to modify the whole column or which of them. Similar to the vertical cross-position of a coordinate point.

``sql
-- Delete Row
DELETE FROM book_table
WEREBookNumber < 200;
````

Below are some examples:

``sql
Oh, update book_table
Set Price = Price* 1.2
Where Publisher = People's Post and Telecommunications Press;
````

Translation of human voice: for table `book_table ' , `Publisher ' , line `"People's Post and Telecommunications" , Price times `1.2 ' (i.e. 20% increase)

``sql
DELETE FROM book_table
WEREBookNumber < 200;

DELETE FROM book_table
Whore author in?
````

# "Where's the sentence"


````
...(update or delete)
Where Price < 50;
...(update or delete)
Whore author = "The Wang Yang" or "The Liu Tianyang"
...(update or delete)
Whore name in;
````

1. If the value `Price ' is less than 50, then...
If `author ' is for Wang Yang or Liu Tianyang, then...
If `name ' is worth Zhang San or Li Si, then...
where to receive an expression written in the back, an expression will calculate a boolean value.

# Here's a knowledge: SQL operator

Algorithmic operator

- `+ ' Plus Operators
- `- ' Subtract Operator
- '* ' Multiplication Operator
- `/ ' Division Operator
- `% 'Takes a model operator

# # Compare operator #

- `= ` equals (also an grant operator)
- `! = `Not equal to
- < ` less than
- `> ' greater than
- < = ` less than or equal to
- > = ` greater than or equal to
- `< > NULL Security equals NULL < = NULL, return result TRUE

# # logical operator #

- `and ' , both terms are true, or false.
- `or ' , one of the two conditions is real, and it's all fake.
- `not ' Invert fake
- `xor ' returns real only on one condition or otherwise false.

Special Operator

- `in ': "Value in the list" operator to filter eligible table entries and return a "real" boolean value to the front or delete. For example `5 in (1, 3, 5) ' returns true.
- `between ' ranges match: e.g. `5 between 1 and 10 ' returns true.
- `like ' pattern matches: `'abc' like 'a%' `returns true. The percentage number here is similar to the sh wildcard.
- `IS NULL ' judges whether the table is NULL': `NULL IS NULL ' returns TRUE.
Example: See if there's a book name called xxx Design xx.

``sql
* From book_table
Where BookName like '% Design % ';

* From book_table
Where BookName like '_____;
- Five underlineds represent five words and returns the name of a book of five words length.
````

A book management library returns a book name similar to Mysql database design.

So, where's the rest of it?

# Auto-maintenance of the reference integrity between the parent and child watch

- **CASCEDE** Cascades Operations: The relevant records in the sub-sheet are also deleted/updated when the parent record is deleted/updated.
- **SET Null** sets the external keybar to NULL in the sub-table (requests the external keybar to allow NULL).
- **RESTRICT** Refusal to operate: not allowed to delete/update the records cited in the parent table (with immediate return error).
-**NO ACTION** is similar to RESTRICT, but is delayed to check for completeness until the end of the service.
- **SET DEFAULT** set to default, not supported by MySQL.

# SELECT Statement

Next to the list, write '* ' and select all columns

``sql
* From student_table
(i) Where age = (select max(age) from student_table);
````

Shows an entry with a "maximum age" in the "standard_table"

# # up and down

ASC up, DESC down.

``sql
SELECT student_name FROM student_table DESC;
````

`LIMIT a, b ' Intercept content. a Index, starting with 0, b is offset, writing is offset.

``sql
SELECT * from `Student Table'
ORDER BY `Sc '
LIMIT 0, 3;
````

# How do you take the other watch?

# # visible connection #

``sql
SELECT name, score-name from student table, score from fraction table
FROM stu_table -- Table I
JOIN score_table -- Table 2
ON STu_table. Stu_id = score_table.s_id; - connection condition
WHERE name = 'Jack ' - screening conditions, which can be followed by AND or.
````

'name 'from 'stu_table '
`score ' from `score_table '

# # Invisible connection #

``sql
SELECT name, score
FROM stur_table, score_table
Where are you?
AND name = 'Jack';
````

Apparently the hidden connection is simpler, so it's recommended here.
。