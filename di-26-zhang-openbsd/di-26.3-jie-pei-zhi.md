# Section 26.3 Configure OpenBSD

# Initial login #

# Get drive #

OpenBSD automatically detects WiFi, graphic cards and sound cards and downloads the associated drive after the first access. Wait a few minutes for its own updating. `Ctrl ' + `C ' can be cancelled (do not do so at the time the system is installed **, please cut off the network!) due to difficulties in accessing offshore websites and if the waiting time is too long, run the `#fw_update ' retake drive after entering the system.

New downloads are driven by time-out errors due to a number of problems and can be refreshed several times. It is also possible, after running `#fw_update ' , to remember the failure driver and then directly access [OpenBSD official firmware website] (http://firmware.openbsd.org/firmware/) to manually access the version. Depressor drive packs, copy internal driver files into `/etc/firmware/ ' folders and restart them.

For example, `inteldrm-firmware-xx.tgz ' is an intel drive which, when depressed, found a directory with i915 under the driver's directory. The following operations can be performed:

```sh '
#mkdir-p/etc/firmware/i915 #
#cp -r intelldrm-firmware-xx/firmware/i915/*/etc/firmware/i915/#copy drive
````

Similarly `amdgpu-firmware-xx.tgz ' is a card drive for amd, which is depressed and found to have an amdgpu directory under the driver ' s irmware directory. The following operations can be performed:

```sh '
Synchronising "%s"
#cp-r amdgpu-firmware-xx/firmware/amdgpu/*/etc/firmware/amdgpu/#copy driver
````

Other drivers are the same.

# Update

# # Normal account access

Login system with root account, then new `/etc/ doas.conf ' text, open `doas.conf ' and add a line `permit persist:wheel '

# # Update and upgrade #

kernel update:

```sh '
# Syspatch
````

System update:

```sh '
# Sysupgrade
````

Driver upgrade:

```sh '
# fw_update
````

Software upgrade:

```sh '
# Pkg_add-u
````

Modify shell:

```sh '
#chsh-s /usr/local/bin/bash username
````


# Mountable Disk

New Mount Point

```sh '
#mkdir-p/media/usb1/media/usb2/media/usb3/media/usb4
````

# # View the disc

Use the `dmesg ' command to view newly inserted disks, such as the U disc format fat32, which may be marked `sd1 ' in the OpenBSD system.

Check partitions

If the inserted disc is `sd1 ' , enter `disklabel sd1 ' to see the partition. As follows:

```sh '
# size among fstype
c: 60062500 0 unused
i: 60062244 256 MSCOS
````

# Mount #

A `i ' division known above, mounted with the following command:

```sh '
#mount/dev/sd1i/media/usb1
````

# Other formats

OpenBSD mounted external hard drive formats include NTFS (need to install software packages `ntfs_3g ' , ext2/ext3 and CDs, etc. for specific commands as follows:

```sh '
#mount/dev/sd3i/media/usb1 # fat32
#mount_ntfs/dev/sd2k/media/usb2 #NTFS
#mount/dev/sd1l/media/usb3 #ext2/ext3
#mount /dev/ cd0a / media/usb4 # CD
````

# Unmount disk #

```sh '
# unmount/media/usb1
````

# Mount the Andre device #

The latest Android disks are mapd using MTP, and we need the corresponding mtp software to manage the cell phone files. Unlike Linux, there are fewer matching software available on the OpenBSD system, where we use `simple-mtpfs ' to do our job.

1. Installation software: #pkg_add simple-mtpfs '

2. New Directory: `#mkidr /media/mtp ' (if an error occurs, the `/media ' directory can be created first)

3. Modify directory privileges: `#chmod 755 /media/mtp '

Mounting equipment: `#simple-mtpfs-o allow_other/media/mtp '

5. Unmounted equipment: #umount/media/mtp '

In addition to the Andre mobile phone, equipment such as the Andre Paper Book may be mounted in the above manner.

# WiFi

The WiFi network in OpenBSD, the configuration file is usually `hostname.if ' , where `if ' is the WiFi driver name + serial number. If a notebook, the WiFi model is rtl8188c, the OpenBSD drive is rtwn, the serial number starts from 0. In order for the system to be automatically connected to WiFi, the `/etc/hostname.rtwn0 ' file can be opened and then added:

```sh '
Dhcp
Join WiFi name wpaky WiFi password
````

Just save it.

Miscellaneous

# Load the touchboard #

Open `/etc/wscansctl.conf ' , add a line `mouse.tp.tapping=1 ' .

# Load multiple threads #

Open `/etc/sysctl.conf ' , add a line `hw.smt=1 ' .

```sh '
ykla# sysctl hw.smt=1
ww.smt: 0-> 1
ykla# sysctl hw.ncpuonline# View threads
hw.ncpuonline=4
````

# Turn off #

OpenBSD has no poweroff available.

```sh '
# halt-p
````

or

```sh '
# Shut down-h now
````

# HTTP Agent #

** Watch out for lowercase! Not effective here. **

```sh '
http://192.168.X:7890
````

# # Related information

- [OpenBSD FAQ] (https://www.openbsd.org/faq/) - - [Chinese version of this] (https://openbsd-zh-assessment.github.io/docs-openbsd-zh/)
â™ª Absolute Open BSD, 2nd Edition: United for the Practical Paranoid*, ISBN 978-1593274764, No Staarch Press
(https://www.k58.uk/openbsd.html)

