Section 26.5 Desktop and other software

# MATE

# Install

LOGIN TO __CODESPAN_0_ ACCOUNT, RUNNING AT TERMINAL

```sh
# pkg_add mate mate-utils mate-extras
```

OPEN `/etc/rc.conf.local`, ADD THE FOLLOWING LINES:

```sh
pkg_scripts=messagebus avahi_daemon
apmd_flags=-A
multicast=YES
```

Terminal Input

```sh
# pkg_add noto-cjk zh-wqy-zenhei-ttf
```

to install Chinese fonts。

exit the root account and log in with the normal account number。

Configure

OpenBSD can use xenodm or startx to start the desktop and recommend xenodm to enhance security。

Add the following text to __CODESPAN_0 (xenodm login) or __CODESPAN_1 (conservator login)。

```sh
. ~/.profile
. ~/.kshrc
/usr/local/bin/mate-session
```

Once set, re-entry the account or startx on the console can enter the MATE desktop。

## Install input method and Chinese interface

```sh
# pkg_add fcitx fcitx-configtool-qt fcitx-gtk fcitx-qt fcitx-chinese-addons
```

remember to add manual chinese input to fcitx5 settings。


OPEN THE __CODESPAN_0_ FILE IN THE USER DIRECTORY AND ADD THE FOLLOWING TEXT:

```sh
export LANG="zh_CN.UTF-8"
export LC_ALL="zh_CN.UTF-8"
export XIM_PROGRAM=fcitx
export XIM=fcitx
export XMODIFIERS="@im=fcitx"
export QT_IM_MODULE=XIM
export GTK_IM_MODULE=XIM
```

# XFCE

# Install

Terminal Run

```sh
# pkg_add xfce xfces-extras
```

OPEN `/etc/rc.conf.local`, ADD THE FOLLOWING LINES:

```sh
pkg_scripts=messagebus avahi_daemon
apmd_flags=-A
multicast=YES
```

- Services:

```sh
# rcctl enable messagebus avahi_daemon
```

Terminal Input

```sh
# pkg_add noto-cjk zh-wqy-zenhei-ttf
```

to install Chinese fonts。

EXIT __CODESPAN_0_ ACCOUNT AND LOG IN WITH A NORMAL ACCOUNT NUMBER。

Configure

Add the following text to __CODESPAN_0 (xenodm login) or __CODESPAN_1 (conservator login)。

```sh
. ~/.profile
. ~/.kshrc
/usr/local/bin/startxfce4
```

ONCE SET, RE-ENTER THE ACCOUNT OR RUN __CODESPAN_0_ON THE CONSOLE TO ACCESS THE XFCE DESKTOP。

# # Enter Method and Chinese Interface

```sh
# pkg_add fcitx fcitx-configtool-qt fcitx-gtk fcitx-qt fcitx-chinese-addons
```

remember to add manual chinese input to fcitx5 settings。

OPEN THE __CODESPAN_0_ FILE IN THE USER DIRECTORY AND ADD THE FOLLOWING TEXT:

```sh
export LANG="zh_CN.UTF-8"
export LC_ALL="zh_CN.UTF-8"
export XIM_PROGRAM=fcitx
export XIM=fcitx
export XMODIFIERS="@im=fcitx"
export QT_IM_MODULE=XIM
export GTK_IM_MODULE=XIM
```

Gnome

# Install

Open terminal, enter

```sh
# pkg_add gnome gnome-extras
```

Then open the terminal and run the following command:

```sh
# rcctl disable xenodm
# rcctl enable messagebus gdm avahi_daemon
```

Finally restart the system, you can log on to the Gnome desktop。

Chinese font

```sh
# pkg_add noto-cjk zh-wqy-zenhei-ttf
```

Chinese Interface

TERMINAL __CODESPAN_0_, AMEND TEXT TO READ:

```sh
LC_CTYPE="zh_CN.UTF-8"
LC_MESSAGES="zh_CN.UTF-8"
```

When restarted, you can enter the Chinese interface。

# theme and icon

The following are just two examples of the theme [Qogir] (https://www.gnome-look.org/p/12306331) and the icon [Tela] (https://www.gnome-look.org/p/12279924/), which you can access [Relevant website] (https://www.gnome-look.org/), which you can install by choosing your preferred theme and icon。

# Get ready #

Terminal Run

```sh
# pkg_add git bash
```

# # Theme Install

```sh
$ git clone https://github.com/vinceliuice/Qogir-theme && cd Qogir-theme
```

_CODESPAN_0, amend the first line of the document **shebang** to _CODESPAN_1_

AFTER __CODESPAN_0_

Icon installation

```sh
$ git clone https://github.com/vinceliuice/Tela-icon-theme && cd Tela-icon-theme
```

_CODESPAN_0, amend the first line of the document **shebang** to _CODESPAN_1_

After

```sh
# bash ./install.sh
```


# KDE 6

>** Warning**
>
>The desktop has a problem in VMware 17 UEFI environment (the window is grey and one mouse can move). Also, root users in the BIOS mode face the same problems, only normal users. UEFI under physics is normal。

The curriculum is based on OpenBSD 7.6。


```sh
# pkg_add kde dbus kde-plasma kde-plasma-extras
```

OPEN `/etc/rc.conf.local`, ADD THE FOLLOWING LINES:

```sh
pkg_scripts=messagebus avahi_daemon
apmd_flags=-A
multicast=YES
```

Launch services:

```sh
# rcctl enable messagebus avahi_daemon
```

Add the following text to __CODESPAN_0 (xenodm login: __CODESPAN_1) or __CODESPAN_2 (correspond login)。

```sh
. ~/.profile
export QT_FORCE_STDERR_LOGGING=1
export XDG_CURRENT_DESKTOP=KDE
export DESKTOP_SESSION=plasma
ck-launch-session startplasma-x11
```

Or..


```sh
# 设置 XDG_RUNTIME_DIR 环境变量
# 使用当前用户的 UID 创建一个专属运行时目录，用于进程间通信
export XDG_RUNTIME_DIR=/tmp/run/$(id -u)

# If directories do not exist, create and set permissions to access only for current users
if[! -d $XDG_RUNTIME_DIR]; then
mkdir-m 700-p $XDG_RUNTIME_DIR
f

# Enable Qt standard error log output to debug Qt applications
export QT_FORCE_STDERR_LOGGING=1

# SET THE CURRENT DESKTOP ENVIRONMENT TO KDE (FOR DESKTOP COMPATIBLE APPLICATIONS AND SERVICES)
export XDG_CURRENT_DESKTOP=KDE

# Set the current desktop session to plasma (identify KDE Plasma desktop environment)
i'm sorry

# save standard output and standard error logs to ~/.startplasma-x11.log
/usr/local/bin/startplasma-x11 > ~/.startplasma-x11.log 2>&1
````


ONCE SET, RE-ENTER THE ACCOUNT OR RUN __CODESPAN_0_ON THE CONSOLE TO ENTER THE KDE DESKTOP。

References

- [The meta/kde,-plasma port] (https://openports.pl/path/meta/kde,-plasma)
- [Install KDE Plasma on OpenBSD 7.5] (https://www.youtube.com/watch?v=Gmj6O07QmRI), video tutorial
- [KDE6 on OpenBSD] (https://rsadowski.de/posts/2024-05-20-kde6-on-openbsd/), author ' s blog
- [OpenBSD KDE Plasma Desktop] (https://rsadowski.de/posts/2024-01-09-openbsd-kde/), author's blog
- [NEW: KDE Plasma (x11/kde-plasma)] (https://marc.info/?l=openbsd-ports&m=169399324962&w=2)

Firebox

** there is no decoder available without ffmpeg installed, and the video cannot be played properly! **

```sh
# pkg_add firefox-esr ffmpeg
```

# View real time traffic

```sh
# pkg_add bwm-ng # 安装
# bwm-ng         # 启动，动态刷新的
  bwm-ng v0.6.3 (probing every 0.500s), press 'h' for help
  input: getifaddrs type: rate
  /         iface                   Rx                   Tx                Total
  ==============================================================================
              lo0:           0.00 KB/s            0.00 KB/s            0.00 KB/s
             bse0:         396.59 KB/s           12.80 KB/s          409.39 KB/s
           pflog0:           0.00 KB/s            0.00 KB/s            0.00 KB/s
  ------------------------------------------------------------------------------
            total:         396.59 KB/s           12.80 KB/s          409.39 KB/s
```

