# Section 23.1 Automount file system


# automount

Note**
>
>automount ' may have a question of competence, and please use DSBMD if so requested.

Support NTFS/FAT/exFAT/EXT2/EXT3/EXT4/UFS/HFS/XFS/ISO9660.

# Install automount #

- Install with pkg:

```sh '
# Pkg install automount
````

- Or install with Ports:

```sh '
#cd /usr/ports/filesystems/automount/
# Make install clean
````

Yeah.

# DSBMD Automount

DSBMD is the media/filesystem type detection daemon for FreeBSD, which allows the client to mount the storage device. It is configured to open the box.

# Install DSBMD

- Install with pkg:

```sh '
# pkg install dsbmd #
# pkg order dsbmc-cli # command line client
# pkg install dsbmc # QT interface client
````

- Or install with Ports:

```sh '
# cd /usr/ports/filesystems/dsbmd/ & make effective clean #
# cd /usr/ports/filesystems/dsbmc-cli/ & make order
# cd /usr/ports/filesystems/dsbmc/ & make install clean #QT interface client
````

The client selects a load and the recommended option `dsbmc ' for the desktop is easier.

# # DSBMD Configuration Method

>** Skills**
>
> used in two parts, the daemon and the client. Client can request DSBMD to mount, unmount and eject media, or set a CD/DVD reading speed. The daemon executes client requests. The daemon is a system process, so all operations can be performed, and the client is an ordinary user process, so any user can do it. The unauthorised user request will not be executed, and the daemon will judge according to the configuration of the user and group.

- The dæmon profile is in `/usr/local/etc/dsbmd.conf ' .

- Default configuration `wheel ' and `operator ' groups of users can be mounted, if not for both groups, to modify the configuration file (simplistic configuration file)

Enable daemon:

```sh '
# Sysrc dsbmd_enable
# Service dsbmd start
````

### # QT client

The `dsbmc ' client will only send a request to the daemon when running, so the client will be activated on the desktop.

Open `dsbmc ', an icon for `dsbmc ' can be seen in the tray area

[systray](./.gitbook/assets/dsbmd_dsbmc_systray.png)

Opens the main window, `preferences '-> `general settings ', tick `automaticallymounts ' to use automounting

(. . .gitbook/assets/dsbmd_dsbmc_gui.png)

! [Setting automounting] (..gitbook/assets/dsbmd_dsbmc_options.png)

Following the insertion of the U-disk, the desktop hint is:

[insert mounted hint] (.. .getbook/assets/dsbmd_dsbmc_add_tip.png)

The default is mounted below `/media/ ' and the client is the main user.

[mount information] (.. . . . .gitbook/assets/dsbmd_dsbmc_userm.png)

### # xfce autostart

Click `Setting ' > `session and start ' as follows:

. . . . .gitbook/assets/dsbmd_dsbmc_7.png)

# # The command line client #

```sh '
_Other Organiser
````

- Common parameters:
- `-e ' Popup
- '-m ' mounted
- `u ' unmount
- The following command can be written in a shell starter file, or in a desktop-related file such as .xinitrc ', .xprofile ' so that it can be mounted automatically in the backstage (of course, no interface hint)

```sh '
dsbmc-cli-a
````

## # daemon configuration (configuration file `/usr/local/etc/dsbmd.conf ')

The default configuration is already working well, but for more detailed mount control, changes the configuration file for the daemon. The following profile is in `/usr/local/etc/dsbmd.conf ' .

# # Ourmount description


```sh '
♪ Controls between DSBMD numbers as user.
# Sysctl can vfs. usermount is set to 1.
= true
````

`usermount ' has been opened by default in the configuration file, but to start with the `vfs.usermount ' system variable, written in `/etc/sysctl.conf '

```sh '
Vfs.usermount=1
````

- After the `usermount ' has been opened, the mounted program is implemented in user-based space without opening the `usermount ' and the mounted program is dominated by `root ' users.
- Whether `usermount ' is on or off, the owner of the mounted point is the client.

## # Set users allowed to mount automatically

```sh '
# Allow_users - Comma secured list of us who are allowed to connect.
♪ Allow_users ♪

# Allow_groups - Comma secured list of groups whose members are allowed
# To respect.
♪ Allow_groups ♪
````

Modify `allow_user ' and `allow_groups ' to manage the user that can be mounted automatically.

#### Modify access to mount point and the next file directory (e. g. NTFS)

In the case of the mounted NTFS file system, modify access rights to `640 ' (rw-r--) and directory access rights to `750 ' (rwxr-x----).

```sh '
I don't know.
== sync, corrected by elderman == @elder_man
I don't know.
ntfs_mount_cmd_usr = "/sbin/mount_fusefs auto"
I don't know.
````

There are two configurations for NTFS, and `usermount ' is used for `ntfs_mount_cmd_usr ' or `ntfs_mount_cmd ' . Amend to read as follows:

```sh '
I don't know.
ntfs_mount_cmd = "/usr/local/bin/ntfs-3g-o \uid=${DSBMD_UID}, gid=${DSBMD_GID}, fmask=137, dmask=02""
I don't know.
ntfs_mount_cmd_usr = "/sbin/mount_fusefs auto"
I don't know.
````

This is the `fmask=137, dmask=027 ' mask parameter provided for the Ntfs-3g mount option to control the mount option.

! [changes mount permissions] (. .gitbook/assets/dsbmd_customperm.png)
