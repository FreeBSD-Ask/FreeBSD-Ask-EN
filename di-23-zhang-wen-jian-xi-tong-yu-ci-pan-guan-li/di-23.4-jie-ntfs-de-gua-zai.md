Section 23.4 NTFS & Fat32

# NTFS

# Install ntfs-3g

[Bug 206978 - sysutils/fuses-ntfs: Disable UBLIO as it breaks mkntfs] (https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=206978) and [Bug 194526 - sysutils/fuses-ntfs: ntfs-3g with libublio lost files] (https://bugs.freebsd.org/bugzilla/show_bug.cgi?id= 194526). Do not install with pkg, use Ports:

```sh '
#cd /usr/ports/filesystems/ntfs
# Make config
````

! [FreeBSD installation ntfs-3g] (./.gitbook/assets/ntfs1.png)


Uncheck `UBLIO ' , compile installation:


```sh '
# Make BATCH=yes important clean
````

# # Configure ntfs-3g

Inserts your ntfs format hard drive/ U disk into the computer. This is when you see its device name, such as `da0 ' (see `/dev/da0 ' ).

Amend `rc.conf ':

```sh '
# Sysrc kld_list+
````

Create nfts partition

## # MBR partition table

```sh '
Use mbr partitions, if they are already available
# Gpart add-t ntfs da0
````

# # GPT partition table

```sh '
Use gpt partitions, if they are already available
# Gpart add-ms-basic-data da0
````

Format ntfs partition


```sh '
# mkntfs-vf /dev/da0s1
````

- `-f ' indicates rapid formatting.
- `-v ' indicates detailed output.


References

[ntfs on freebsdn] (https://www.gridbugs.org/ntfs-on-freebsd/)



Automount NTFS

Amend `/etc/fstab ' to add:

```sh '
/dev/da0s1 /media/NTFS ntfs rw, mount_prog=/usr/local/bin/ntfs-3g, late 0
````

Manually Mount NTFS

```sh '
#ntfs-3g /dev/da0s1 /media/NTFS-o rw,uid = 1000,gid = 1000, mask = 0
````

- If it is not known which disk partition is NTFS, it can be viewed by order;

```sh '
# fstyp /dev/da0s1
````


- If you are wrong, try to delete the hibernation file:

```sh '
#ntfs-3g /dev/da0s1 /mnt/NTFS-o remove_hiberfile
````

- If there's still a problem:

```sh '
# ntfsfix /dev/da0s1
````

Then remount.

References

- [ntfs-3g manpage] (https://www.freebsd.org/cgi/man.cgi?query=ntfs-3g&format=html). Various parameters.

# FAT32 Filesystem

FAT32 is typically displayed as `ms-basic-data ' in the `gpart show ' command:

```sh '
# Gpart show-p nda1 # ignore useless information
= >3441942973 nda1 GPT (20G)
29360128 4194304 nda1p3 ms-basic-data (2.0G) # is fat32
````

Note**
>
> Remark file system type to mount

```sh '
#mount-v-t msdosfs/dev/nda1p3/mnt# test mounted. -v parameter, Verbose displays details; -t parameter, type (type), specifies the file system.
/dev/nda1p3 on /mnt (msdosfs, local, writes: sync 1 async 0, reads: sync 512 async 0, fsid 7d000032000, vnodes: count 1)
#ls /mnt/ # check the mount
Oh, my test 1 test 2
# unmount/mnt # unmount file system
````

