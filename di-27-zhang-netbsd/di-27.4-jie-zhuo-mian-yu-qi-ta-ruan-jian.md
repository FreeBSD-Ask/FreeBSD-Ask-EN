# Section 27.4 Desktop and Chinese Environment Common Software

NetBSD uses common desktops such as KDE 4, GNOME. Take your own xorg and do not need a separate installation。

# Set the Chinese environment

CREATES OR EDITS __CODESPAN_0, WITH WHICH USER TO LOG IN __CODESPAN_1 TO WHICH USER TO CHANGE. ADD AT THE TOP:

```sh
export LANG=zh_CN.UTF-8
export LC_CTYPE=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
```

# Fcitx Chinese input method

```sh
# pkgin install fcitx5 fcitx5-qt fcitx-gtk fcitx5-chinese-addons 
```

CREATES OR EDITS __CODESPAN_0, WITH WHICH USER TO LOG IN __CODESPAN_1 TO WHICH USER TO CHANGE. ADD THE FOLLOWING TO THE CHINESE ENVIRONMENT VARIABLE:

```sh
export XMODIFIERS='@im=fcitx'
export GTK_IM_MODULE=fcitx/xim
export QT_IM_MODULE=fcitx
```

Create a running directory:

```sh
$ mkdir -p ~/.config/fcitx
```

# ibus chinese input method

```
# pkgin install ibus ibus-pinyin
```

CREATES OR EDITS __CODESPAN_0, WITH WHICH USER TO LOG IN __CODESPAN_1 TO WHICH USER TO CHANGE. ADD THE FOLLOWING TO THE CHINESE ENVIRONMENT VARIABLE:

```sh
export GTK_IM_MODULE=ibus
export QT_IM_MODULE=ibus
export XMODIFIERS=@im=ibus
ibus-daemon --daemonize --xim
```

# Xfce

- Installation of:

```sh
# pkgin install xfce4 fam slim noto-cjk-fonts ee
```

- Configure:

__CODESPAN_0_ EDIT __CODESPAN_1_, AND REPLACE `xdm=YES`_ WITH `xdm=NO`_. SAME。

Then:

```sh
# cp /usr/pkg/share/examples/rc.d/famd /etc/rc.d/
# cp /usr/pkg/share/examples/rc.d/dbus /etc/rc.d/
# cp /usr/pkg/share/examples/rc.d/slim /etc/rc.d/
# echo rpcbind=YES >> /etc/rc.conf
# echo famd=YES >> /etc/rc.conf
# echo dbus=YES >> /etc/rc.conf
# echo slim=YES >> /etc/rc.conf
$ echo xfce4-session >> ~/.xinitrc
$ ln  ~/.xinitrc  ~/.xsession
```

It's gonna be slower to start the desktop

![..gitbook/assets/nb-xfce0.png]

![./.gitbook/assets/nb-xfce1.png]

![./.gitbook/assets/nb-xfce2.png]

![...gitbook/assets/net-fcitx.png]

References

- [HOWTO into the XFCE 4 Desktop on NetBSD 8.1] (https://slice2.com/2019/09/21/howto-install-the-xfce-4-desktop-on-netbsd-8-1/?amp=1)

# MATE

- Installation of:

```sh
# pkgin in mate-desktop mate slim fam noto-cjk-fonts ee
```

>** Skills**
>
> CODESPAN_0 IS THE ABBREVIATION OF __CODESPAN_1_. MORE ABBREVIATIONS CAN BE VIEWED BY A SINGLE COMMAND WITHOUT PARAMETER, I. E. ___CODESPAN_2_。

- Configure:

```sh
# cp /usr/pkg/share/examples/rc.d/famd /etc/rc.d/
# cp /usr/pkg/share/examples/rc.d/dbus /etc/rc.d/
# cp /usr/pkg/share/examples/rc.d/slim /etc/rc.d/
# cp /usr/pkg/share/examples/rc.d/avahidaemon /etc/rc.d/
# echo rpcbind=YES >> /etc/rc.conf
# echo famd=YES >> /etc/rc.conf
# echo dbus=YES >> /etc/rc.conf
# echo slim=YES >> /etc/rc.conf
# echo avahidaemon=YES >> /etc/rc.conf
$ echo exec mate-session >> ~/.xinitrc 
$ ln  ~/.xinitrc  ~/.xsession
```

![./.gitbook/assets/nb-ibus-mate.png]

References

- [Succidentally mentioned to install Mate Desktop Environment in NetBSD9.0] (https://www.bilibili.com/read/cv17144331)

# KDE 4

>** Skills**
>
>THIS SECTION WAS SUCCESSFULLY TESTED UNDER A PHYSICAL MACHINE. PHYSICAL ACCESS TO THE DESKTOP (UEFI) IS NORMAL。

>** Warning**
>
>Unable to access the desktop (UEFI) at present under VB, VM, black screen, reported [NetBSD Production Report #57554] (https://gnats.netbsd.org/cgi-bin/query-pr-single.pl? Nuber=57554), if you know why。

- Installation of main procedures:

```sh
# pkgin in kde noto-cjk-fonts readline libcups ee
```

- Configure:

```sh
# cp /usr/pkg/share/examples/rc.d/* /etc/rc.d
# echo dbus=YES >> /etc/rc.conf
# echo kdm=YES >> /etc/rc.conf
# echo rpcbind=YES >> /etc/rc.conf
# echo avahidaemon=YES >> /etc/rc.conf
# echo hostname=ykla >> /etc/rc.conf # 设置主机名，请将 "ykla" 替换为你想使用的主机名
```

__CODESPAN_0_ REBOOT SYSTEM。

allow root login under default status。

# It's broken #

- No Chinese

The Chinese language package has been removed because of KDE5 (https://pkgsrc.se/x11/kde4-l10n-zh_CN)。

References

- [NetBSD Wiki/GNome] (https://wiki.netbsd.org/GNAME/)
- [How can I start kde5 in netBSD9?] (https://www.unix.com/unix-for-beginners-questions-and-answers/283891-how-can-i-start-kde5-netbsd9.html)
- [Re: How to manage KDE on NetBSD?] (https://www.mail-archive.com/netbsd-user@netbsd.org/msg13146.html)
