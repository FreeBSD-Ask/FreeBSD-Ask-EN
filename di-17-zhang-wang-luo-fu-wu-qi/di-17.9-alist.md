# Section 17.9


- Functional request: make it Port。

# Install

# Official binary package

```sh
# mkdir alist
# cd alist
# fetch https://github.com/AlistGo/alist/releases/download/v3.39.2/alist-freebsd-amd64.tar.gz
# tar zxvf alist-freebsd-amd64.tar.gz
# rm alist-freebsd-amd64.tar.gz 
```

Note**
>
>As described and tested in [Manual integration] (https://alist.nn.ci/zh/guide/install/manual.html), no additional rear end alist-web is required。

# # compile installation (optional)


Installation dependency:

```sh
# pkg install git go
```

Or..

```sh
# cd /usr/ports/devel/git/ && make install clean
# cd /usr/ports/lang/go/ && make install clean
```

Then:

```sh
# git clone -b v3.38.0  https://github.com/alist-org/alist # 写作本文时，最新版本为 v3.38.0
# cd alist/public
# fetch https://github.com/AlistGo/alist-web/releases/download/3.38.0/dist.tar.gz     # 这是前端部分，官方已经编译好的，注意和后端版本相对应
# tar xzvf dist.tar.gz  # 解压缩
# rm dist.tar.gz # 清理垃圾
# cd ..
```


```bash
# mkdir build
# cd build
# go build -ldflags="-w -s" -tags=jsoniter ..
```

THE COMPILED DOCUMENT IS UNDER __CODESPAN_0_。


# deployment rc service

# WRITE __CODESPAN_0_

__CODESPAN_0:

```sh
#!/bin/sh
. /etc/rc.subr

name = "alist"
"alist_enable"
common_path=/home/ykla/alist/build
command=$${command_path}/alist# command path
command_args= "start"
stop_cmd=do_stop# stop command parameters

do_stop()
_Other Organiser
stop
♪ I'm sorry ♪

load_rc_config $name#variments defined in rc.conf files
: ${alist_enable:=no} # sets no if no list_enable is set
run_rc_compand "$1" #run service command
````

Increase enforcement authority

```sh
# chmod +x /usr/local/etc/rc.d/alist
```


# # use alist service

```sh
# sysrc alist_enable=YES
```

ENHANCE SECURITY BY USING THE COMMON USER TO EXECUTE THE PROCESS (NOTING THAT THE OWNER AND GROUP OF __CODESPAN_0_ CATALOGUES MUST BE __CODESPAN_1_):

```sh
# sysrc alist_user=ykla
```

Initialization Option I

```sh
root@ykla:/home/ykla/alist/build # ./alist admin
INFO[2024-10-29 12:02:04] reading config file: data/config.json        
INFO[2024-10-29 12:02:04] config file not exists, creating default config file 
INFO[2024-10-29 12:02:04] load config from env with prefix: ALIST_     
INFO[2024-10-29 12:02:04] init logrus...                               
INFO[2024-10-29 12:02:04] Successfully created the admin user and the initial password is: CtSnFKv2 # 此处即是密码
INFO[2024-10-29 12:02:04] Admin user's username: admin                 
INFO[2024-10-29 12:02:04] The password can only be output at the first startup, and then stored as a hash value, which cannot be reversed 
INFO[2024-10-29 12:02:04] You can reset the password with a random string by running [alist admin random] 
INFO[2024-10-29 12:02:04] You can also set a new password by running [alist admin set NEW_PASSWORD]
```

```sh
root@ykla:/home/ykla/alist/build # service alist start
Starting alist.
INFO[2024-10-29 12:07:25] success start pid: 1633
```

# # Initialization option II

```sh
# service alist start # 先启动服务
Starting alist.
INFO[2024-10-28 22:43:45] success start pid: 3436                      
# service alist stop # 再结束服务
Stopping alist.
Waiting for PIDS: 3436.
# rm -rf daemon
# ps # 查看有无正在运行 alist，将其 kill，若无可跳过下一步
# kill 3436
```

RESET __CODESPAN_0_ PASSWORD TO __CODESPAN_1_, WHICH MUST BE GIVEN AN ABSOLUTE PATH TO CHANGE:

```sh
# ./alist admin set 1 --data /home/ykla/alist/build/data
```

Restart service:

```
# service alist start
```

# Login #

FOR CODESPAN_0, CHANGE __CODESPAN_1_ TO YOUR LOCAL AREA NETWORK ADDRESS. THE USERNAME IS __CODESPAN_2_。

[Alist in FreeBSD]


References

- [alist agreement -- data run active] (https://github.com/AlistGo/alist/issues/2580)。
- In addition, [start effectively] (https://alist.nn.ci/zh/guide/install/manual.html#%E5%AE%88%E6%A%A4%E8%F%9B%E7%A8%B) will be mandatory_CODESPAN_0_. For __CODESPAN_1_, any `data`_ will be attached to __CODESPAN_3_. But it's still not working。

# Specify vlc as an external player for Alist

The embedded player in the Alist sometimes cannot play some video, but Alist can call the external program via __CODESPAN_0_. Alist specifies a video address for vlc like `vlc://http://xxx`, provided that you specify a vlc program at the beginning of __CODESPAN_2_。

install vlc:

```sh
# pkg install vlc
```

Or:

```sh
# cd /usr/ports/multimedia/vlc/ 
# make install clean
```

__CODESPAN_0 __ when transmitting URI to vlc will contain __CODESPAN_1 __, vlc cannot open such an address and needs to be removed before opening the video address and then calling vlc, the following is to be called:

```sh
safreya ~ % cat ~/.local/share/applications/vlc-noschema.sh
#!/bin/sh
url="$1"
clean_url="${url#vlc://}"           # 去除 vlc:// 头
vlc "$clean_url"
```

Increase enforcement authority

```sh
$ chmod u+x ~/.local/share/applications/vlc-noschema.sh
```

New __CODESPAN_0_file to call the script above:

```sh
safreya ~ % cat ~/.local/share/applications/userapp-vlc.desktop
[Desktop Entry]
Encoding=UTF-8
Version=1.0
Type=Application
NoDisplay=true
Exec=/home/safreya/.local/share/applications/vlc-noschema.sh %U
Name=vlc
Comment=Custom definition for vlc
```

REGISTER __CODESPAN_0_URI CALLER

```sh
$ update-desktop-database ~/.local/share/applications
$ xdg-mime default userapp-vlc.desktop x-scheme-handler/vlc
```

# References

- [ansoncloud8/am-alist-freebsd] (https://github.com/ansoncloud8/am-alist-freebsd/blob/main/.github/workflows/build.yml)
- [Run from source code] (https://alist.nn.ci/zh/guide/install/source.html), official document
