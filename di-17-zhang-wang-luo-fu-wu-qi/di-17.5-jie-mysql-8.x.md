# Section 17.5 MySQL 8.X


# Install

# MySQL 8.0 LTS

Installation:

```sh
# pkg install mysql80-server
```

or compile installation:

```sh
# cd /usr/ports/databases/mysql80-server/ 
# make install clean
```

# MySQL 8.4 LTS

Installation:

```sh
# pkg install mysql84-server
```

or compile installation:

```sh
# cd /usr/ports/databases/mysql84-server/ 
# make install clean
```

View post-installation instructions (8.0 similar):

```sh
root@ykla:~ # pkg info -D mysql84-server
mysql84-server-8.4.3_1:
On install:
There is no initial password for first time use of MySQL. # 即无密码
首次使用 MySQL 时没有初始密码。# 即无密码
Keep in mind to reset it to a secure password.
记得将其重置为一个安全的密码。

MySQL 8.4 has a default/usr/local/etc/mysql/my.cf,
remember to place it with your own
or set CODESPAN_0 in rc.conf.
MySQL 8.4 has a default /usr/local/etc/mysql/my.cnf
Remember to replace it with your own file
Or set __CODESPAN_0_ in rc.conf。

On upward:
As of MySQL 8.0.16, the MySQL servicers perfores the upgrade tasks normally
yes, by mysql_upgrade
already as of that version, and will be moved in a future MySQL version.
Starting with MySQL 8.0.16, MySQL server performs an upgrade previously processed by mysql_upgrade。
so, mysql_upgrade is no longer needed and has been discarded from that version
will be removed from the future MySQL version。

Because mysql_upgrade no longer performs upward tasks,
no, it leaves with status 0 unconstructionally.
because mysql_upgrade no longer performs the upgrade
It exited unconditionally to state zero。
````

# Start service

```sh
# service mysql-server enable
mysql enabled in /etc/rc.conf
# service mysql-server start
Starting mysql.
```

# Login

mysql 8.0, 8.4 default passwords are empty, according to the post-installation note。

```sql
root@ykla:~ # mysql -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 8
Server version: 8.0.27 Source distribution

Copyright (c) 2000, 2021, Oracle and/or its assets.

Oracle is a registered trademark of Oracle Corporation and/or its
other names may be trademarks of their relevance
i'm sorry, owners.

Type 'help;' or 'h' for help.

root@localhost [(none)]>
````

# Change password

Sets the root password for the database __CODESPAN_0_, then refreshs the permissions and exits。

```sh
root@localhost [(none)]> alter user 'root'@'localhost' identified by 'z';
Query OK, 0 rows affected (0.02 sec)

root@localhost [(none)] >flush privileges;
Query OK, 0rows affected (0.00 sec)

root@localhost [(none)] quit;
Bye
````

Re-entry:

```sql
root@ykla:~ # mysql -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 9
Server version: 8.0.27 Source distribution

Copyright (c) 2000, 2021, Oracle and/or its assets.

Oracle is a registered trademark of Oracle Corporation and/or its
other names may be trademarks of their relevance
i'm sorry, owners.

Type 'help;' or 'h' for help.

> show data;
+ - - - - - +
Database
+ - - - - - +
information_schema
mysql
%1 %1
you can't do that
+ - - - - - +
4rows in set (0.01 sec)

root@localhost [(none)]>
````

# Profile

THE DEFAULT CONFIGURATION FILE TEMPLATE IS LOCATED IN __CODESPAN_0, AND THE DEFAULT CONFIGURATION FILE IS THEORETICALLY LOCATED IN __CODESPAN_1 (BUT THE DEFAULT IS EMPTY)。

This can be done:

```sh
# cp /usr/local/etc/mysql/my.cnf.sample /usr/local/etc/mysql/my.cnf
```

THEN MODIFY __CODESPAN_0_ AS NECESSARY。

IN __CODESPAN_0_, WRITE

```sh
mysql_optfile="/abc/xyz.cnf"
```

You can change the profile path。

