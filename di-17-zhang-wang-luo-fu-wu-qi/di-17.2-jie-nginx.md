# Section 17.2 Nginx

# Install

````
# Pkg install nginx
````

or

````
#cd/usr/ports/www/nginx/
# Make install clean
````

# # Find Related Packages

- Ports: `$ls/usr/ports/www/grep nginx '
- Pkg: `$pkg search-o nginx'


# Start

```sh '
Root@ykla:
nginx enabled in/etc/rc.conf
# service nginx start
Check on nginx configuration:
nginx: the communication file/usr/local/etc/nginx/nginx.conf syntax is ok
nginx: conversion file/usr/local/etc/nginx/nginx.conf test is relevant
Starting.
````

You can check nginx for start-up and running through `sockstat-4 | grep nginx ':

```sh '
Root@ykla:
www nginx 1154 6tcp4*:80*:*
* root nginx 1153 6 tcp4 *:80 * *:*
````

# Browse the web

This machine opens `localhost ' , or `ip ' , such as `http://192.168.179.150 ' :

[NGINX FreeBSD] (. . .gitbook/assets/nginx1.png)

# Profile

Configure the curriculum can be found in [official document] (https://nginx.org/en/docs/).

This paper simply describes how Nginx and Nginx profiles can be started in FreeBSD.

In FreeBSD, the configuration file for Nginx is in `/usr/local/etc/nginx/ ', while the main configuration file is in `/usr/local/etc/nginx/nginx.conf ' .

The root directory for Nginx in the default configuration is `/usr/local/www/nginx/ ' . If you need to change the location of the directory, insert `/usr/local/etc/nginx/nginx.conf '

```sh '
Root/usr/local/www/nginx;
````

Change to directory location you want, for example `root /path/to/new/webroot '

## # Example file (Nginx + Typecho pseudostatic + SSL)

```ini '
#Our nobody;
Worker_processes 1;

♪ This official logpath is complication-in to make sure configuring
♪ Errors are logged somewhere, especially during unattended Boot when stderr
This path will be touched on every nginx
# Start regardless of error log migration configured here.
#https://trac.nginx.org/nginx/ticket/147 for more information.
# I don't know
#error_log/var/log/nginx/error.log
# I don't know

#pid logs/nginx.pid;


This post is part of our special coverage Syria Protests 2011.
We're going to have to do this.
♪ I'm sorry ♪


http {
I don't know.
_type application/octet-stream;

# log_formatmain '$remote_addr - $remote_user [$time_local] "$request"
'$status $body_bytes_cent "$http_referer"
# '$http_user_agent' '$http_x_forwarded_for';

#access_log logs/access.logmain

I don't know, sendfile on;
#tcp_nopush on;

#keepalive_timeout0;
(b) Keep alive_timeout 65;

#gzip on;

Server {
It's a big deal.
_name localhost;

#charset koi8-r;

#access_log logs/host.access.logmain

Organisation
Root/usr/local/www/nginx;
I don't know.
If (-f $request_filename/index.html){
$ 1/index.html break;
♪ I'm sorry ♪
If (-f $request_filename/index.php){
$ 1/index.php;
♪ I'm sorry ♪
If (!-f $request_filename)
Rewrite(.*)/index.php;}
♪ I'm sorry ♪


*. php(.*)*$)*
Root/usr/local/www/nginx;
Fastcgi_pass 127.0.0.1:9,000;
-Fastcgi_index index.php;
Fastcgi_param SCRIPT_FILANAME $request_filename;
Include pastcgi_params;
♪ I'm sorry ♪





#location ~.*.php(.*)*$)*
# include pastcgi_params;
# fastcgi_pass127.0.0.1:9,000;
♪ I'm sorry ♪

#error_page 404/404.html;

# Redirect service officers ages to the status page/50x.html
# I don't know
Error_page 500 502, 503,504/50x.html;
Localization = / 50x.html
Root/usr/local/www/nginx-dist;
♪ I'm sorry ♪

# Proxy the PHP scripts to Apache standing on 127.0.0.1:80
# I don't know
#local ~ .php {
#proxy_pass http://127.0.0.1;
♪ I don't know ♪

# Pass the PHP scripts to FastCGI service delivery on 127.0.0.1:9,000
# I don't know
*. php(.*)*$)*
Root/usr/local/www/nginx;
Fastcgi_pass 127.0.0.1:9,000;
-Fastcgi_index index.php;
Fastcgi_param SCRIPT_FILANAME $request_filename;
Include pastcgi_params;
♪ I'm sorry ♪

♪ Any access to the htaccies files, if Apache's document root
# Concurswith nginx's one
# I don't know
#local ~ /.ht
# Danny all;
♪ I don't know ♪
♪ I'm sorry ♪


♪ Another virtual most using mix of IP-, name-, and port-based configration
# I don't know
# Server #
# listen 8000;
#listen somename:8080;
# Server_name somename alias another.lias;

# Localization / {
# root html;
#index index.html index.htm;
♪ I'm sorry ♪
♪ I don't know ♪


# HTTPS server
# I don't know
Server {
I'm sorry.
_name localhost;

ssl_certificate/usr/local/etc/nginx/fbxs.crt;
ssl_certificate_key/usr/local/etc/nginx/fbxs.key;

I'm sorry, ssl on;
I don't know.
Ssl_certificate_key fbxs.key;
Ssl_session_timeout 5m;
ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Configure according to this protocol
ssl_ciphers EDCHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;# Configure with this package
ssl_prefer_server_ciphers on;
*. php(.*)*$)*
Root/usr/local/www/nginx-dist;
Fastcgi_pass 127.0.0.1:9,000;
-Fastcgi_index index.php;
Fastcgi_param SCRIPT_FILANAME $request_filename;
Include pastcgi_params;
♪ I'm sorry ♪
Organisation
Root/usr/local/www/nginx-dist;
index index.php;
♪ I'm sorry ♪
♪ I'm sorry ♪

♪ I'm sorry ♪
````
