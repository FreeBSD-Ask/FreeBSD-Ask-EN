# Section 15.1 Network parameter configuration command

# MANUAL SETTINGS __CODESPAN_0_

AFTER MANUALLY EDITING __CODESPAN_0_, RESTARTING THE SYSTEM WILL BE RESET BECAUSE DHCP WILL REWRITE THIS FILE。

PREVENT __CODESPAN_0_SERVICE___CODESPAN_1_: EDIT __CODESPAN_2_, BY __CODESPAN_3_

References

- [resolvconf] (https://man.freebsd.org/cgi/man.cgi?query=resolvconf), man manual
- [8.8.8 or 1.1.1 if set in etc reolv conf doesn't stay as an early in the file after a network start] (https://forums.freebsd.org/threads/8-8-8-8-or-1-1-1-if-set-in-etc-resolv-conf-doesnt-stay-as-an-entry-in-the-file-after-a-network-rest859551)

# CODESPAN_0__

LET'S SEE IF THERE'S A NET, IF THERE'S NO MORE THAN THIS SECTION. PLEASE NOTE THAT {\CHFFFFFF}{\CH00FFFF} {\CHFFFFFF}{\CH00FFFF} {\CHFFFFFF}{\CH00FFFF} {\CHFFFFFF}{\CH00FFFF} {\CHFFFFFF}{\CH00FFFF}{\CH00FFFF} IT'S NOT REAL。

Example output:

```sh
root@ykla:~ # ifconfig
genet0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500
	options=68000b<RXCSUM,TXCSUM,VLAN_MTU,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6>
	ether dc:a6:1a:2e:f4:4t
	inet 192.168.123.157 netmask 0xffffff00 broadcast 192.168.123.255
	media: Ethernet autoselect (1000baseT <full-duplex>)
	status: active
	nd6 options=29<PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL>
lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> metric 0 mtu 16384
	options=680003<RXCSUM,TXCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6>
	inet6 ::1 prefixlen 128
	inet6 fe80::1%lo0 prefixlen 64 scopeid 0x2
	inet 127.0.0.1 netmask 0xff000000
	groups: lo
	nd6 options=21<PERFORMNUD,AUTO_LINKLOCAL>
root@ykla:~ #
```

CONFIGURE DNS


EDIT __CODESPAN_0 TO EMPTY THE ORIGINAL CONTENTS. ADD THE FOLLOWING:

```sh
nameserver 223.5.5.5 # 阿里 DNS，下同
nameserver 223.6.6.6
nameserver 8.8.8.8   # 谷歌 DNS，境外设备用
```

Then reset the network configuration:

```sh
# /etc/netstart restart
```

Try pinging a 163com. (Ctrl + C interruptable), Example output:

```sh
root@ykla:~ # ping 163.com
PING 163.com (123.58.180.7): 56 data bytes
64 bytes from 123.58.180.7: icmp_seq=0 ttl=55 time=30.617 ms
64 bytes from 123.58.180.7: icmp_seq=1 ttl=55 time=30.608 ms
64 bytes from 123.58.180.7: icmp_seq=2 ttl=55 time=30.633 ms
**Ctrl** +C
--- 163.com ping statistics ---
3 packets transmitted, 3 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 30.608/30.619/30.633/0.010 ms
root@ykla:~ #
```

Network connectivity。

# Set the card in mixed mode

```sh
ifconfig_xxx="inet x.x.x.x netmask x.x.x.x promisc"
```

References

- [ifconfig (8)] (https://man.freebsd.org/cgi/man.cgi?ifconfig (8))

# __CODESPAN_0_RELEVANT

>** Skills**
>
The >__CODESPAN_0_ commands are mostly one-off, not permanent configurations. You have to write rc files to last。

__CODESPAN_0:

```ini
hostname="ykla" # 主机名，不能为空，否则无法使用 xorg
ifconfig_igc0="DHCP" # 让网卡 igc0 使用 DHCP
ifconfig_igc0="inet 192.168.31.77  netmask 255.255.255.0" # 设置网卡 igc0 的 IPv4 为 192.168.31.77，子网掩码为 255.255.255.0（静态 IP）
defaultrouter="192.168.31.1" # 默认网关/默认路由，在家中一般是路由器 IP
ifconfig_igc0_alias0="inet 192.168.1.33 netmask 255.255.255.0" # 设置网卡 igc0 别名 IPv4 192.168.1.33，子网掩码为 255.255.255.0。即拥有额外的 IPv4 地址
static_routes="static1 static2" # 静态路由，结合下方使用①
route_static1="-net 10.0.10.0/24 10.0.1.1" # 如果要访问 10.0.10.0/24 这个网络（10.0.10.0 到 10.0.10.254），就把数据包发送给 10.0.1.1，由它来转发
route_static2="-net 172.16.30.0/24 172.16.1.254" # 如果要访问 172.16.30.0/24  这个网络（172.16.30.1 到 172.16.30.254），就把数据包发送给 172.16.1.254，由它来转发
```

1 IN __CODESPAN_0, IF YOU WANT TO WRITE MORE THAN ONE CONFIGURATION AT A TIME, THIS FORMAT CAN ONLY BE __CODESPAN_1。

IF IN __CODESPAN_0_

```ini
ABC_XYZ="xxx" # 第一行
ABC_XYZ="yyy"
ABC_XYZ="ccc"
ABC_XYZ="ddd"
```

THIS FORM WILL ONLY TAKE EFFECT IN THE FIRST LINE AND THE REST OF THE ___CODESPAN_0_ CONFIGURATION LINE WILL NOT TAKE EFFECT


# See the speed of the net

Refresh every 2 seconds:

```sh
# systat -if 2
```

# View FreeBSD download traffic (net-mgmt/bwm-ng)

```sh
# pkg install bwm-ng
# bwm-ng
  bwm-ng v0.6.3 (probing every 0.500s), press 'h' for help
  input: getifaddrs type: rate
  /         iface                   Rx                   Tx                Total
  ==============================================================================
              em0:           2.04 MB/s            6.03 KB/s            2.05 MB/s
              lo0:           0.00  B/s            0.00  B/s            0.00  B/s
        vm-public:           2.04 MB/s            2.05 MB/s            4.09 MB/s
             tap0:           5.49 KB/s            2.04 MB/s            2.04 MB/s
  ------------------------------------------------------------------------------
            total:           4.09 MB/s            4.09 MB/s            8.18 MB/s
```

LETTER __CODESPAN_0_ TOGGLE FLOW FORMAT. MORE METHODS OF USE CAN BE FOUND BY __CODESPAN_1_。
