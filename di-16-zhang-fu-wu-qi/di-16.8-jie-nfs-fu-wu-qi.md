Section 16.8 NFS Server

NFS corresponds to a web protocol for sharing files between different operating systems.

# Configure `/etc/exports '

The first one to be configured is `/etc/exports ' , with reference to the instructions in the document, with a line:

```sh '
/usr/home/logs-alldirs
````

Means that all subdirectories under `/usr/home/logs/ ' are shared on `114.514.1919.810 ' as this client.

Services

- Insert in `/etc/rc.conf ':

```sh '
rpcbind_enable
"YES."
"YES."
````

- Start nfsd:

```sh '
# Service nfsd start
````

- Reload mountaind, read profile:

```sh '
# Service mountaind reload
````

- Go to pre-configured client, open NFS:

```sh '
# Sysrc nfs #
````

# Mount

```sh '
#mount server:/usr/home/logs/mnt
````

# Fragmentation and unfinished business

# # The shared directory uses soft links to cause mistakes


```sh '
I'm sorry.
````

The hint of `access denied ' has nothing to do with the user ' s permissions and is rejected by the NFS server when mounted. So the real problem is that the service is not properly configured.


- View system logs:

```sh '
#cat / var/log/messages
````

A record of this:

```sh '
Bad reports list line '/home/logs': symbolic link in export path or statusfs failed
````

This record explains why a soft link exists in the `/home/logs ' path and cannot be shared. Unlike some Linux releases, `/home ' is a soft link to `/usr/home ' in FreeBSD.

Note**
>
>In the new version of FreeBSD (14.0 and above), `/home ' [no longer] (https://cgit.freebsd.org/src/committee/?id=bb2d2ce4220) `/usr/home ' should no longer exist.

- And then...

```sh '
/home/logs-alldirs 114.5114.1919.810
````

there shall be substituted:

```sh '
/usr/home/logs-alldirs
````

- Reload mountaind, read profile:

```sh '
I don't know.
````

- Back to the client, run:

```sh '
I'm sorry.
````

Successfully mounted.

# References

[31.3. Web file system (NFS)] (https://handbook.bsdcn.org/di-31-zhang-wang-luo-fu-wu-qi/31.3.-wang-luo-wen-jian-xi-tong-nfs.html)
- [mount_nfs --mount NFS file systems] (https://www.freebsd.org/cgi/man.cgi?mount_nfs (8))
- [Li Jinzhong.com/article/translation/sitemap-index.html]
- [freebsd nfs mounted problems] (https://blog.51cto.com/chhquan/1708250)

