Section 16.1 FTP Server

FTP is File Transfer Protocol. Using the FTP service to build a server can quickly transfer files.

#Pure-FTPd (based on MySQL)

> ** Warning**
>
>Pure-FTPD has removed support for RFC 2640, so the use of ftp command lines for FTP-related non-English files under Windows will be uncoded and the code cannot be modified. See <https://www.pureftpd.org/project/pure-ftpd/news/>.
>
> ``Powershell '
♪ ftp Quote opts utf8 on
>504 Unknown company
> ````

I don't...

Use the command line (in FreeBSD) and WinSCP to test Pure-FTPd without a problem of hyphenation.

# Install

As the pkg package does not have database support, the software needs to be installed through ports:

```sh '
#cd /usr/ports/ftp/pure-ftpd
# Make config
````

Select `MYSQL ' , leaving the default option to return the car:

![..gitbook/assets/PureFTPD.png]

```sh '
# Make BATCH=yes important clean
````

## Configure `/usr/local/etc/pure-ftpd.conf ' files

### # Generate Profile

```sh '
#cp /usr/local/etc/pure-ftpd.conf.sample/usr/local/etc/pure-ftpd.conf
#cp /usr/local/etc/pureftpd-mysql.conf.sample/usr/local/etc/pureftpd-mysql.conf
````

#### Edit profile and add mysql support

Configure the `/usr/local/etc/pure-ftpd.conf ' document, with the following modifications:

```ini '
# An informal ftp client like ie

BrokenClientscompatibility yes

# Passive connection to the port range of response.

Passive PortRange 30000 50000

# The smallest UID that allows the user to log in.
# For example, a value of 100 will prevent all UID users less than 100.
# If you want root to log in, use 0.

MinUID 2000

# Allow FXP transfers only for authentication users.

AllowUserFXP yess

# If not disabled or commented, the log will miss not find ftp user

AntiWarez yes

# Automatically create a user home directory if it does not exist

CreateHomeDir yes

# MySQL profile (see README. MySQL)

MySQLConfigfile /usr/local/etc/pureftpd-mysql.conf
````

# # Configure mysql

> ** Note**
>
>This is based on MySQL 8.x. See other sections for the installation of MySQL, basic settings.

Please install mysql 8.x.

Create database

``sql
I don't know.
I'm sorry.
DROP TABLE IF EXISTS `users ' ;
CREATE TABLE `users ' (
`User ' varchar (255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
`Password ' varchar (255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
`Uid `int(11) NOT NULL DEFAULT-1 COMMENT 'User ID',
`Gid ' int(11) NOT NULL DEFAULT-1 COMMENT ' ID',
`Dir ' varchar (255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
`quotafiles ' int(255)NULL DEFAUT 500,
`quatasize ' int(255)NULL DEFAUT 30,
`ulbandwidth`int(255)NULL DEFAULT 80,
`dldwidth ' int(255)NULL DEFAULT 80,
`ipadless ' varchar (255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT'*,
`comment ' int(255)NULL DEFAULT NULL,
`status ' tinyint (4) NULL DEFAUT 1,
`ulratio ' int(255)NULL DEFAULT 1,
`dlratio ' int(255)NULL DEFAULT 1,
PRIMIRY KEY (`User ' )
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = Dynamic;
````

### Create login database users and set passwords

``sql
CREATE USER 'pftp'@'localhost' IDENTIFIED BY 'abc123';
* TO 'pftp'@'localhost';
I don't know.
````

Test database links:

```sh '
♪ Mysql-u pftp-h localhost pureftpd
````

## # Configure '/usr/local/etc/pureftpd-mysql.conf '

Full examples:

```ini '
####### # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# I don't know #
# Example MySQL profile for Pure-FTPd. # I don't know #
# See README. MySQL for details. # I don't know #
# I don't know #
####### # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# MySQLServer database server address
MySQLServer 127.0.0.1

# MySQLServer database server port
MYSQLPort 3306

# Optional: If the database server runs on this machine, specify the path for mysql.sock.
MYSQLSocket / var/run/mysqld/mysqld.sock

# Database username
MySQLUser pftp

# Database password
MySQLPassword abc123

# Database name
MySQLDatabaseureftpd

# Password encryption (identified here)
# Valid values include: "cleartext", "argon 2, "scrypt", "crypt" and "any"
MySQLCrypt

# The string parts in the following settings will be replaced when running:
# I don't know
# L will be replaced by a user name to try to authenticate.
# I will be replaced by the IP address that the user is connected to.
# P will be replaced with the port number that the user connects to.
\R will be replaced by the IP address of the user's source.
# \d will be replaced by a long integer form of a remote IP address.
# I don't know
# Use these replacement strings to perform very complex queries, especially for virtual mainframe settings.

# SQL query statement to get the password
MySQLGetPW SELECT Password

# SQL query statement to get a system user name or UID
MySQLGETUID SELECT Uid FROM uss Weree User

# Default UID - set to overwrite the query results for MySQLGetUID
MySQLDefaultUID 2000

# SQL query statement to get a system user name or GID
MySQLGID SELECT Gid FROM user Werere User

# Default GID - the query results of MySQLGetGid will be overridden when set
MySQLDefaultGID 2000

# SQL query statement to get the user home directory
MySQLGetdir SELECT Dir FROM uss Werere User

# Optional: query for maximum number of files (Virtual quota support to open)
MySQLGeqTTAFS SELECT QuotaFiles FROM USER WERE USER

# Optional: used to obtain maximum disk usage (MB in virtual quota support)
MySQLGetQTASZ SELECT QuotaSize FORM USERS WEREE USER

# Optional: upload/download ratio, server needs to support ratio function
MySQLGetRatioUL SELECT ULRATIO FORM USES WHORE USER
MySQLGetRatioDL SELECT DLRATIO FORM USES WHERE USER

# Optional: Bandwidth limit in KB/s. Server needs to support bandwidth limit functionality
MySQLGetBandthUL SELECT ULBANDWIDth
MySQLGetBandthDL SELECT DLBANDWIDth USER USER

Enable ~ path extension. ** Do not use blindly unless the following conditions are met:**
# 1) You know exactly what you're doing.
#2) Actual users are consistent with virtual users.
# MySQLForceTildeExpansion 1

# If you use a service-type storage engine, you can enable SQL services to avoid competitive conditions.
# If you use the traditional MyISAM engine, keep this comment.
# MySQLTransactions On
````

## Add ftp group and user

>** Warning**
>
>Pure-pw won't work after using the database.


```sh '
# Pw grouped ftpgroup-g 2000
# Pw used ftpuser-u 2001-g 2000-s/sbin/nologin-w-d-home/pureftp-c "Virtual User Pure-FTPd"-m
````

- Add FTP login user (must manually write to mysql database), the user created by the following command is `test '. The password is `test2 ' .


``sql
USE pureftpd;
INSERT INTO `users ' (`User ' , `Password ' , `Uid ' , `Gid ' , `Dir ' , `quotside ' , `albandwidth ' , `dlbandwidth ' , `ipadres ' , `comment ' , `status ' , `ulratio ' , `delratio ' )
VALUES ('test', 'test2', 2001, 2000, '/home/pureftp/www', 500, 30, 80, 80, '*', NULL, 1, 1, 1);
````

Note**
>
> The `Uid ' , `Gid ' in the table must be consistent with the user created by `pw userad ' above.

>** Skills**
>
>The basic idea is that virtual users who write to the database will inherit the permissions of the user created by `pw userad ' and GID\UID and then operate the FTP through the user in the database. Same.

Examples of practical operations:

``sql
> show data;
+ - - - - - +
Database
+ - - - - - +
Information_schema
Mysql
%1 %1
Pureftpd
You can't do that.
+ - - - - - +
5rows in set (0.00 sec)
Root@localhost [Pureftpd] > USE Pureftpd;
Database changed
> INSERT INTO `users ' (`User ' , `Password ' , `Uid ' , `Gid ' , `Dir ' , `quotside ' , `albandwidth ' , `dlbandwidth ' , `pardress ' , `comment ' , `status ' , `ulratio ' , `dllotio ' )
- VALUES ('test', 'test2', 2001, 2000, '/home/pureftp/www', 500, 30, 80, ' *, NULL, 1, 1, 1);
Query OK, 1row listed (0.01 sec)
Root@localhost [Pureftpd] > self* from uss;
++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++
U.S. Password, U.
++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++
TULL 1
++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++ - ++
1row in set (0.01 sec)

````

- Configure FTP Directory

```sh '
#mkdir-p /home/pureftp/www
# Down-R ftpuser: ftpgroup/home/pureftp
# chmod-R 775/home/ftpuser # permission to set 775 to read and write in the same group
````

References

- [Linux Environment FTP Permission Settings Detailed and Operating Steps Overall]

Service Operations

```sh '
# service sure-ftpd available #
# service sure-ftpd start
# service sure-ftpd stop #
# service sure-ftpd restart #
````

References

- [Virtual Hosting with PureFTPd And MySQL] (http://km.npru.ac.th/userfiles/R013/km_articles_files/20120227104346_Virtual%20Hosting%20With%20PureFTPd%20And%20MySQL.pdf), based on this framework

# # troubleshooting and unfinished business

- Pure-FTPd log at `/var/log/messages ' .

# ProFTPD (based on MySQL)

>** Skills**
>
>ProFTPD does not code under Windows' own FTP link.



## Install ProFTPD

> ** Note**
>
>This is based on MySQL 8.0. See other sections for the installation of MySQL, basic settings.

Please install MySQL 8.x - Need to be consistent with the version of `databases/mysql8X-client ' installed by `proftpd-mod_sql_mysql'.

```sh '
# pkg install program programpd-mod_sql_mysql
````

or

```sh '
#cd /usr/ports/ftp/proftpd/ & make install clean
#cd /usr/ports/databases/proftpd-mod_sql_mysql/ & make install clean
````

##ProFTPD profile # /usr/local/etc/proftpd.conf`

- Edit the configuration file for ProFTPD `/usr/local/etc/proftpd.conf ' as follows:

>** Skills**
>
>For example, see `/usr/local/etc/proftpd.conf.sample'.

```ini '
Server
ServerType standalone
Default Server on
"FTP Server ready"
Port 21
Umask 022

# Timeout settings
Timeout Login 300
Timeout Idle 36000
Timeout NoTransfer 36000

# Resource constraints
User programd
Group programd
RLimitMemory 256M 256M
RLimitOpenFiles 1024 1024
Passive Ports 50000 60000

# Log Configuration
LogFormat default "%h %l %u %t\r\s %b"
LogFormat auth "%v [%P] %h %t "%r\s"
SystemsLog / var/log/proftpd/proftpd.log
TransportLog / var/log/proftpd/xfer.log
Extended Log / var/log/proftpd/auth.log AUTH auth

# MySQL module load
LoadModule mod_sql.c
LoadModule mod_sql_mysql.c
LoadModule mod_sql_passwd.c

# Allow access to your own directory only, remove access #

Default Root

# Run Overwrite File

Allo Overwrite on

♪ Global ♪
# Database connection
SQLConnectInfo programpd

# Key amendments
SQLAuthTypes SHA256
SQLPasswordEngine on

# User chart map
SQLUserInfo ussername password uid girl homedir shell
SQL DefaultGID 2000
SQLDefaultUID 2000
RequireValid Shell off

# Authentication Configuration
AuthOrder mod_sql.c
SQLAENTICATE USES

# Login statistics
SQLNamedQuery get count SELECT ""CONCAT"
SQLNamedQuery updatecount UPDATE "count=count+1 WeHERE username='u'" users
SQLShowInfo PASS "230"
SQLog PASS update count

# File Operations Log

SQLNamedQuery log_work FREEFORM "INSERT INTO worklog (user_name, file_and_path, bytes, Send_time, clent_ip, clent_name, clent_committee) VALUES ('%u', '%f', %b, NULLIF('%T','), 'a', '%h', '%m')"

SQLLog RETR, STOR, DELE log_work

</Global>
````

- Create a directory to store the log of the FTP server:


```sh '
#mkdir / var/log/proftpd
````

>** Warning**
>
>If not ** Active** Create (even if created automatically) it should be created again, prompting `proftpd[] 3435]: warning: handing possibly compromised data at line 65 of '/usr/local/etc/proftpd.conf'.


>** Skills**
>
>ProFTPD profile `/usr/local/etc/proftpd.conf ' has a grammatical check command `proftpd -t -d5 ' .

We have specified in our settings that the server will work on port 21 in active mode and in passive mode within 50000-60000. These ports should be opened in the firewall. For PF, this was done by adopting the following rules:

```sh '
Pass in quick on $ext_if proto tcp from any to $ext_if port {21,50000:60000}
````

Create user

For security purposes, we will run Proftpd as a non root user. We will therefore create this user:

```sh '
# Adduser
Username: programpd# username
Full name: FTP User
Uid (Leave empty for default):
Login group [proftpd]:
Login group is programpd.
[default]:
Shell (sh csh tcsh lash nologin)
Home directory
Home directory missions:
(yes/no) [no]:
[yes]: no.
Lock out the account after crime?
Username: programpd
Password: <disabled>
Full Name: FTP User
Uid: 1002
ZFS dataset: zroot/ home/proftpd
Class:
Groups: programpd
Home: /home/proftpd
Home Mode:
Shell: /usr/sbin/nologin
Locked: no
ZFS data.
IFO:
Add another user?
Goodbye!
````


Database Related

- Create a MySQL database and a user with full access to the created database:

``sql
CREATE DATABASE `proftpd ' CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
````

- Create database user and password (authorization programd database):

```sh '
CREATE USER 'proftpd'@'localhost' IDENTIFIED BY '123456';
* TO 'pftp'@'localhost';
FLUSH PRIVILGES;
````

- Create data sheets:

``sql
USE programd;

DROP TABLE IF EXISTS USES;
CREATE TABLE `users ' (
`username ' Varchar(30) NOT NULL,
`decr 'TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_090_i_ci NOT NULL,
`password ' Varchar(64) Not Null,
`uid ' INT(11) DEFAULT NULL,
`gid ' INT(11) DEFAULT NULL,
`homedir ' Varchar(255) DEFAULT NULL,
`shell ' Varchar(255) DEFAULT NULL,
`count ' INT(11) NOT NULL DEFAULT0,
PRIMIRY KEY (`username ')
) ENGINE =InnoDB DEFAULT CHARSET =utf8mb4 COLLATE =utf8mb4_0900_ai_ci;
DROP TABLE IF EXISTS worklog;
CREATE TABLE worklog (%)
id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT
Date TEMESTAMP(0) DEFAULT CURRENT_TIMESTAMP(0),
Ours_name VARCHAR(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_i_ci DEFAULT NULL,
CARATER SET utf8mb4 COLLATE utf8mb4_0900_i_ci DEFAULT NULL,
Bytes BIGINT UNSIGNED DEFAULT NULL,
Send_time VARCHAR (9) CHARACTER SET utf8mb4 COLLATE utf8mb4_090_ai_ci DEFAULT NULL,
CLALATE utf8mb4_0900_ai_ci DEFAULT NULL,
I'm not sure I'm going to be able to do this.
CLALATE utf8mb4_0900_ai_ci DEFAULT NULL,
I'm sorry.
UNIQUE INDEX id (id)
ENGINE =InnoDB Character SET =utf8mb4 COLLATE =utf8mb4_0900_ai_ci ROW_FORMAT =DYNAMIC;
INSERT `proftpd ' . `users ' (`username ' , `descr ' , `password ' , `uid ' , `gid ' , `homedir ' , `shell ' , `count ' )
VALUES ('test', 'test user', SHA2('FTPpassword_here', 256), '1002', '1002', '/home/www/ftp', NULL, '0');
````

Created:

- FTP username `test '
- FTP Login Password `FTPpassword_here '
- UID '1002 '
- GID '1002 '

>** Warning**
>
>UID GID must be the same as the programpd user! Otherwise, you can't write!
>
>
> You can determine the UID and GID of the programpd user by:
>
> ```sh '
>root@ykla:/home/ykla id programd
>uid=1002 (proftpd) gid=1002 (proftpd) groups=1002 (proftpd)
> ````


- Test database links:

``sql
# Mysql-u programpd-h localhost programpd

Proftpd@localhost [proftpd] > show data;
You have an error in your SQL syntax; check the manual that guarantees to your MySQL service for the right syntax to use near 'data' at line 1
> show data;
+ - - - - - +
Database
+ - - - - - +
Information_schema
%1 %1
Proftpd
+ - - - - - +
3rows in set (0.00 sec)

>use proftpd;
Database changed
{\bord0\shad0\alphaH3D}productpd
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
You know, we're gonna have to use the word "screw."
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
test user |d1d6930fda5f964acba51ec4c35d0d0db3b36d25bf59f1120abd2e4f9140d9|1002|1002| /home/www/ftp|NULL|0
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1row in set (0.00 sec)
````

Creates a directory and a test FTP user that specifies the created directory as a user directory:

```sh '
#mkdir-p /home/www/ftp
# Down -R programpd: programpd/home/www/ftp
#chmod-R775 /home/www/ftp
````

Service Operations

```sh '
♪ service programd available ♪
# service program started #
# service program stop #
# service programd restart #
````

Use user `test ', password `FTPpassword_here ' to log in to FTP.

# vsftpd

vsftpd is Very Security FTP Daemon. More popular on Linux. Tested in the Windows on FTP client and will not be confused.

# # Install vsftpd

- Install by pkg

```sh '
# pkg install vsftpd-sl pam_pwdfile apace24
````

Name Description
|: - - - - |: |
vsftpd-ssl
|Pam_pwdfile | A PAM module allows for user authentication using a plain text password file. Zenium
`htpasswd '

>** Skills**
>
>FreeBSD `/etc/passwd ' is only compatible and not actually used. Relevant db database files are actually used.

- By Ports:

````
#cd /usr/ports/ftp/vsftpd/ & make install clean
#cd /usr/ports/security/pam_pwdfile/ & make install clean
#cd /usr/ports/www/apache24 & make important
````

Observation of installation output:

```sh '
[2/2] Installing vsftpd-ssl-3.0.5_2...
Creating groups
Using emerging group 'ftp'
Creating users
Creating user 'ftp' with uid '14'
== sync, corrected by elderman ==
[2/2] Expressing vsftpd-ssl-3.0.5_2: 100%
````

Seeing vsftpd creates a user called `ftp ' to see the user details:

```sh '
♪ id ftp
uid = 14 (ftp) gid = 14 (ftp) groups = 14 (ftp)
````

# Create virtual users #

```sh '
#adduser
Usedname: ftpest
Full name:
Uid (Leave empty for default):
Login group [ftptest]: ftp# Note here
Login group is ftp.
[default]:
Shell (sh csh tcsh nologin) [sh]: nologin # Note here
Home directory [/home/ftptest]:
Home directory missions:
(yes/no) [no]:
[yes]:
Once an empty password?
[yes/no]:
Enter password: # Note here, I set the password to z
Enter password again:
Lock out the account after crime?
Username: ftptest
Password: *****
Full Name:
Uid: 1003
ZFS dataset: zroot/ home/ftptest
Class:
Groups: ftp
Home: /home/ftptest
Home Mode:
Shell: /usr/sbin/nologin
Locked: no
[yes/no]
ZFS data.
IFO:
Add another user?
Goodbye!
````

above:

- Username `ftptest '
- Password `z '
- Group `ftp '

# # Configure pam_pwdfile

- Create file `/etc/pam.d/vsftpd ' , written:


```ini '
_Other Organiser
I don't know, an account required/usr/lib/pam_permit.so
````

- Create password database (I added user `ftptest ' with password `z ' )

```sh '
#htpasswd-c-b/usr/local/etc/vsftpd_login.dbftptestz
Adding password for us
````

Subsequent addition (may require further `adduser ' , not tested):

```sh '
#htpasswd -b/usr/local/etc/vsftpd_login.db New user password
````


## Configure 'vsftpd.conf '

vsftpd main configuration data are stored in `/usr/local/etc/vsftpd.conf ' and can be modified directly. Because there is a backup template in `/usr/local/etc/vsftpd.conf.sample ' .

We configure `/usr/local/etc/vsftpd.conf ' as follows:

```ini '
# /usr/local/etc/vsftpd.conf example profile
# I don't know
# The default compilation settings are quite conservative. This example document slightly eases the settings to make the FTP daemon more practical.
# See vsftpd.conf.5 for all default compilation settings.
# I don't know
# Note: This example file is not an exhaustive list of the vsftpd options.
# Read the vsftpd.conf.5 page to get a full picture of the vsftpd function.
# I don't know
# No anonymous FTPs allowed?
== sync, corrected by elderman ==
# I don't know
# Allow local users to log in.
Local_enable=YES
# I don't know
# Cancel comments to enable any form of FTP writing command.
== sync, corrected by elderman ==
# I don't know
# The default umask value for local users is 077. You might want to change it to 022.
# If your users expect this
# Local_umask=022
# I don't know
# Undo notes to allow anonymous FTP users to upload files. Only when global writing above is enabled will it be effective.
Besides, you need to create a writeable directory for the FTP users.
# Anon_upload_enable #
# I don't know
# If you want an anonymous FTP user to create a new directory, cancel the comment.
# Anon_mkdir_write_enable #
# I don't know
# Enable directory messages - give relevant messages when remote users enter a directory.
== sync, corrected by elderman ==
# I don't know
# Enable upload/download log records.
Xferlog_enable=YES
# I don't know
# Make sure the PORT transmission connection comes from the port 20 (ftp-data).
Conect_from_port_20=YES

Local_root=/home/ftp
Anon_root=/home/ftp
# I don't know
# If you want, you can arrange to upload anonymous files to different users. Attention! Do not recommend that upload files be attributed to "root" users!
# Down_uploads #
# Down_username=whoever
# I don't know
# You can overwhelm the repository of log files. The default path is as follows.
#Xferlog_file=/var/log/vsftpd.log
# I don't know
# If necessary, you can use the log file in standard ftpd xferlog format.
# Note that in this case the default log file location is / var/log/xferlog.
# Xferlog_std_format=YES
# I don't know
# You can change the default for idle sessions. Unit seconds, same
= 1800
# I don't know
# You can change the default value of the time-out data connection.
Data_convention_timeout=1200
# I don't know
# It is recommended that you define a single user on the system for the FTP server as a completely isolated and privileged user.
# nopriv_user=ftpsecure
# I don't know
# Enable this option, the server will recognize the ABOR request. Owing to the complexity of the code, security is not recommended for use.
# If not enabled, some old FTP client may have problems.
# Async_abor_enable #
# I don't know
# By default, the server pretends to allow ASCII mode, but actually ignores the request.
# Opens the following options and the server will modify the ASCII format of the file in ASCII mode.
# Note: In some FTP servers, ASCII supports allowing a denial-of-service attack (DoS) in the ASCII mode by "SIZE/big/file" command. vsftpd has predicted the attack and remains secure, reporting the size of the original document.
# ASCII format change is a bad feature of the agreement.
# Ascii_upload_enable #
# Ascii_download_enable #
# I don't know
# You can completely customize the login message:
FTP service.
# I don't know
# You can specify a file that prohibits anonymous email addresses. This function may be useful to protect against certain DoS attacks.
# Deny_email_enable #
# (the default value is as follows)
# Banned_email_file=/etc/vsftpd.banned_emails
# I don't know
# You can specify a visible list of local users, and put these users choroot() into their home directory. If choroot_local_user is YES,
# This list becomes a list of users without chroot() operations.
Warning! Choot() could be very dangerous. If you use chroot, make sure you have no permission to write to the top directory of the chroot directory)
# choroot_local_user=NO, chorot_list_file will be restricted to users in their home directory
Choot_local_user=NO
Choot_list_enable=YES
# (the default value is as follows)
_list_file=/usr/local/etc/vsftpd.choot_list
Allow_writeable_chroot=YES
# I don't know
# You can enable the "-R" option for the embedded ls. Disable this option by default to avoid remote users causing too much I/O on large sites.
# However, some defective FTP clients (e.g. "ncftp" and "mirror") assume that there is a "-R" option, so there is some reason to enable it.
#ls_recurse_enable #
# I don't know
# When the "listen" command is enabled, vsftpd runs in an independent mode and listens to the IPv4 package. This command cannot be used at the same time as the listen_ipv6.
== sync, corrected by elderman ==
# I don't know
# This command enables listening IPv6Socket. If you want to listen to the IPv4 and IPv6 packages at the same time, you must run two examples of vsftpd using two different profiles.
Make sure one of the options is out!
# listen_ipv6 #

# This option should be the path to an empty directory.
# This directory should not be written to FTP users. This directory is used as a security chroot () prison in vsftpd when access to the file system is not required.
Secure_chroot_dir=/usr/local/share/vsftpd/empty

# This option is valid only if background mode is enabled.
# It will write the running daemon PID to the specified path file.
# By default do not create a PID file.
#pid_file=/var/run/vsftpd.pid

# If using vsftpd in stand-alone mode, cancel the following two lines:
== sync, corrected by elderman ==
♪ Background ♪

# Use local time
♪ I'm so sorry ♪
````

The official web document is here [VSFTPD.CONF] (https://security.appspot.com/vsftpd/vsftpd_conf.html) and is translated into Chinese in [vsftpd.conf] (https://www.jinbugo.com/vsftpd/vsftpd.conf.html).

# `vsftpd.choot_list'

Create and edit `/usr/local/etc/vsftpd.choot_list ' , add `ftptest '


# Create Path #

```sh '
# mkdir-p/home/ftp
# Down -R ftp:ftp /home/ftp
#chmod-R775/home/ftp
````

# # Service management

```sh '
# service vsftpd available # add service
♪ service vsftpd start ♪
# service vsftpd stop #
# service vsftpd restart #
````

- Use user `ftptest ' with password `z ' login FTP.

- vsftpd log at '/var/log/vsftpd.log '

References

- [How to set up vsftpd on FreeBSD 12?] (https://www.osradar.com/how-to-set-up-vsftpd-on-freebsd-12/), modified from [Installing and configuring vsftpd on FreeBSD] (https://dnaeon.github.io/installing-and-configuring-vsftpd-on-freebsd/). This framework is based on this.

# Connect to the FTP server

Simple example:

``Powershell '
#Telnet localhost 21
Trying 127.0.0.1...
Conned to localhost.
Escape caractor is '.'
220 FTP Server ready
Quit
221 Goodbye.
````

I don't...

Use the `ftp ' command to quickly connect to the FTP server.

Usage:

```sh '
ftp [option] [IP address]
````

I don't...

FTP command:

```sh '
Could not close temporary folder: %s

Put Upload

Bell sends a hint after the file is passed

dir/ls display files and folders under this directory

cd Toggle Directory

Delete Delete File

features display functionality supported by this server

Get remote files Download remote files on the server

Bye end session with server
````

Example:

``Powershell '
PS C:\Users\ykla>ftp 192.168.179.150
Connect to 192,168,179.150.
Welcome to brah FTP service.
200 always in UTF8 mode.
User (192.168.179.150: (none): ftptest
Please identify the password.
Password:

Login regular.
ftp>ls
200 police officers reporting to PASV.
Here comes the direct listening.
FreeBSD is fully focused on QA.pdf.
FreeBSD technology inner (United States of America)
End of philosophy. Docx.
Marxist philosophy.
226 Directory send OK.
ftp: Received 288 bytes, 0.00 seconds 96.00 kilobytes/s.
ftp>delete end of philosophy history.docx
Two hundred and fifty per cent.
I'm sorry.
200 police officers reporting to PASV.
Here comes the direct listening.
-rw -- - 1 1003 14 14717778 Mar 06 15:39 FreeBSD completely pegged the QA version.pdf
-rw - - 1 1003 14 47037557 Mar 06 15:39 FreeBSD technology insider (United States) Michael Urban, (United States) Brian Tiemann, Wisdom East Studio Translation).pdf
-rw -- - 1 1003 14 591146 Oct 20 11:28 Marxist philosophy
226 Directory send OK.
ftp: Received 435 bytes at 0.01 seconds 54.38 kilobytes/s.
{\cHFFFFFF}{\cH00FFFF} get Marxist philosophy.
200 police officers reporting to PASV.
150 Opening BINARY Mode data connection for Marxist philosophy.
226 Transfer complete.
ftp: Received 591146 bytes, 0.01 seconds 42224.71 kilobytes/s.
ftp>ls
200 police officers reporting to PASV.
Here comes the direct listening.
FreeBSD is fully focused on QA.pdf.
FreeBSD technology inner (United States of America)
Marxist philosophy.
226 Directory send OK.
ftp: Received 266 bytes, 0.00 seconds, 66.50 kB/s.
ftp>lcd
Current local directory C:\Users\ykla.
Printer for ftp> put UOS.pdf
200 police officers reporting to PASV.
Okay to send data.
226 Transfer complete.
ftp: Send 1269989 bytes at 0.04 seconds 36285.40 kB/s.
I'm sorry.
200 police officers reporting to PASV.
Here comes the direct listening.
-rw -- - 1 1003 14 14717778 Mar 06 15:39 FreeBSD completely pegged the QA version.pdf
-rw - - 1 1003 14 47037557 Mar 06 15:39 FreeBSD technology insider (United States) Michael Urban, (United States) Brian Tiemann, Wisdom East Studio Translation).pdf
-rw -- - 1 1003 14 1269989 Mar 27 15:13 UOS Printers.pdf
-rw -- - 1 1003 14 591146 Oct 20 11:28 Marxist philosophy
226 Directory send OK.
ftp: Received 515 bytes for 0.01 seconds 46.82 kilobytes/s.
ftp>by
221 Goodbye.
PS C: \Users\ykla>
````

FTP default download path is 'C:\Users\your username ' , I am 'C:\Users\ykla ' .
。