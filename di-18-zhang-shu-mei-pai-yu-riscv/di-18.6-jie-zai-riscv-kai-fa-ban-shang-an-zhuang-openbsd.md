# 18.6 Install OpenBSD on RISCV development board

This post is based on StarFive VisionFive 2 and OpenBSD 7.4

>** Warning**
>
>Please read this document first <https://doc.rvspace.org/VisionFive2/PDF/VisionFive2_QSG.pdf> > 。


[StarFive VisionFive 2] (.../.gitbook/assets/vf2.png)

# Ready for installation

- A RISC-V development board supporting OpenBSD, for example in StarFive VisionFive 2
- A SD CARD, AT LEAST 8GB
- A USB TTL serial, this paper uses FT232 chip (but I recommend ch340)
- An interactive computer with StarFive VisionFive 2 via a serial link
- A tftp server (which could be a virtual machine with a reference to PDF)

riscv initiates the flash of equipment tree (DTB), SPI, uboot, brushing into the development panel (opensbi itself is also in the flash; or you can upgrade yourself, by seeing the PDF in front)。

Mirror ready

Download from OpenBSD official web __CODESPAN_0_。

Download from <https://marc.info/?l=openbsd-misc&m=16904466816826966&q=p3> `jh7110-starfive-visionfive-2-v1.3b.dtb`_ and upload to tftp server。

Burn this __CODESPAN_0_ to SD card. This post is used in [BalenaEtcher] (https://etcher.balena.io/)。

Starts the VisionFive 2 and enters any key on the computer's serial software during the serial output (i.e. __CODESPAN_0_) only by terminating autoboot。

Serial output is as follows:

```sh
U-Boot SPL 2021.10 (Dec 25 2022 - 20:59:18 +0800)
DDR version: dc2e84f0.
Trying to boot from SPI

OpenSBI v1.0
____
/ \  _ \ \
_Other Organiser
 _ \ \ \  _
__ (__) __ (/) | (_)
\ \ \
|
|

.

Model: StarFive VisionFive V2
Net: eth0:thenet@16030000, eth1:thenet@16040000
switch to parties #0, OK
mmc1 is current data
found data 1
bootmode flash data 1
Hit any key to stop autoboot: 0
StarFive
````

# Uboot sets IP and loads DTB files

in opensbi:

```sh
# dhcp
# setenv serverip 192.168.1.169 # 仅作示例，这里需要填你 tftp 服务器真实的 IP 地址
# tftpboot ${fdt_addr_r} jh7110-starfive-visionfive-2-v1.3b.dtb
# load mmc 1:1 ${kernel_addr_r} efi/boot/bootriscv64.efi
# bootefi ${kernel_addr_r} ${fdt_addr_r}  # 输入完成后自动引导 OpenBSD 的 uboot，OpenBSD 开机
```

The mirror is activated from memory and can override the installation. To enter the normal installation process for OpenBSD, see other sections on installation。

If __CODESPAN_0_ appears after restart, redownload the file from the tftp server。

[OpenBSD 7.4 on StarFive VisionFive 2]

# Enable performance mode in OpenBSD

IF NOT SET, THE DEFAULT PARAMETER IS __CODESPAN_0_。

PROVISIONAL ENTRY INTO FORCE: __CODESPAN_0_。

Permanent effect (use a new one if no hint exists):

```sh
echo "hw.perfpolicy=high" >> /etc/sysctl.conf
```

# Reference curriculum

- [Installing OpenBSD 7.3-current on a VisionFive2] (https://gist.github.com/csgordon/74658096f783882b40bd64e11f6983e)
- [Installing OpenBSD 7.4 on a MilkV Mars]
- [JH7110 - VF2] (https://marc.info/?t=169039246403&r=1&w=2)
