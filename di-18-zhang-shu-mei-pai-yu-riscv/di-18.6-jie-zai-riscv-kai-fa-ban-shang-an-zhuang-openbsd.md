# 18.6 Install OpenBSD on RISCV development board

This post is based on StarFive VisionFive 2 and OpenBSD 7.4.

>** Warning**
>
>Please read this document first <https://doc.rvspace.org/VisionFive2/PDF/VisionFive2_QSG.pdf> > .


[StarFive VisionFive 2] (.../.gitbook/assets/vf2.png)

# Ready for installation

- A RISC-V development board supporting OpenBSD, for example in StarFive VisionFive 2
- A SD card, at least 8GB
- A USB TTL serial, this paper uses FT232 chip (but I recommend ch340)
- An interactive computer with StarFive VisionFive 2 via a serial link
- A tftp server (which could be a virtual machine with a reference to PDF)

riscv initiates the flash of equipment tree (DTB), SPI, uboot, brushing into the development panel (opensbi itself is also in the flash; or you can upgrade yourself, by seeing the PDF in front).

Mirror ready

Download `minirot74.img ' from OpenBSD official network.

Download from <https://marc.info/?l=openbsd-misc&m=16904466816826966&q=p3> `jh7110-starfive-visionlive-2-v1.3b.dtb ' and upload to tftp server.

Burn this `minirot.img ' to SD card. This post is used in [BalenaEtcher] (https://etcher.balena.io/).

Start VisionFive 2 and press any key input on the computer's serial software during the serial output (i.e. `Hit any key to stop autoboot ' ) to enter opensbi only by terminating autoboot.

Serial output is as follows:

```sh '
U-Boot SPL 2021.10 (Dec 25 2022 - 20:59:18 + 0800)
DDR version: dc2e84f0
Trying to Boot from SPI

OpenSBI v1.0
____
/ \  _ \ \
_Other Organiser
 _ \ \ \  _
__ (__) __ (/) | (_)
\ \ \
|
|

. . . . . . . . . . .

Model: StarFive VisionFive V2
Net: eth0:thenet@16030000, eth1:thenet@16040000
Switch to parties #0, OK
mmc1 is current data
Found data 1
Bootmode flash data 1
Hit any key to stop autoboot: 0
StarFive
````

# Uboot sets IP and loads DTB files

In opensbi:

```sh '
â™ª Dhcp
#setenv service 192,168.1.169 # for example, you need to fill in your tftp server's real IP address
#tftpboot${fdt_addr_r}jh7110-starlive-2-v1.3b.dtb
# load mmc1: $1 {kernel_addr_r}efi/boot/bootriscv64.efi
# Bootefi ${kernel_addr_r} ${fdt_addr_r} # Enter uboot, OpenBSD startup for OpenBSD after completion
````

The mirror is activated from memory and can override the installation. To enter the normal installation process for OpenBSD, see other sections on installation.

`root data: `Please redownload the file from the tftp server if it appears after restart.

[OpenBSD 7.4 on StarFive VisionFive 2]

# Enable performance mode in OpenBSD

If not set, the default parameter is `hw.cpupeed=750 ' .

Provisional entry into force: `sysctl hw.perfpolicy=high ' .

Permanent effect (use a new one if no hint exists):

```sh '
> / etc/syscl.conf
````

# Reference curriculum

- [Installing OpenBSD 7.3-current on a VisionFive2] (https://gist.github.com/csgordon/74658096f783882b40bd64e11f6983e)
- [Installing OpenBSD 7.4 on a MilkV Mars]
- [JH7110 - VF2] (https://marc.info/?t=169039246403&r=1&w=2)
