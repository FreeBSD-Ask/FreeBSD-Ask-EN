# Section 21.12 Linux Compatibility Fragmentation and Unfinished Matters

# Linux Compatible Sound

You may need to run the Linux program directly in the FreeBSD without sound in the current Chroot Linux compatibility layer, not chorot.

Ubuntu Compatible Layer:

Edit `/compat/ubuntu/etc/asund.conf ' , in the following two lines, note that it is an exclamation mark `! ' , not a number `1 ' .

```sh '
Pcm.!
Pcm!
````

# Run software directly from the FreeBSD command line (based on Ubuntu compatible)

Method to run the software from the FreeBSD command line without chroot:

One.

```sh '
# sysctl compat.linux.emul_path=/compat/ubuntu #
#echo compat.linux.emul_path=/compat/ubuntu>/etc/sysctl.conf#permanent settings
````

Two.

```sh '
#mv/compat/ubuntu/lib64/ld-linux-x86-64.so.2/compat/ubuntu/lib64/ld-linux-x86-64.so.2.back
#ln-s /compat/ubuntu/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2/compat/ubuntu/lib64/ld-linux-x86-64.so.2
````

Then there is no need for choot to run the Linux program directly at the terminal (only partially).

** Arch and OpenSUSE compatibility only need one, not two**

References

- [FREEEBSD, SYSTEM ADMINISTATIC Ubuntu base system into FreeBSD's Linux Binary Compatibility] (https://www.micski.dk/221/12/21/install-ubuntu-base-system-into-freebsds-linux-binary-compatibility/)

Run QQQ with normal user privileges

Compatible layer users have uid map relationships with FreeBSD users.

Assuming that your common user name for FreeBSD is ykla, uid is 1001 (normally default 1001):

```sh '
# used-uid 1001-gid 0-m ykla #
````

>** Warning**
>
> After creating the user ykla in Arch, this user cannot be used for the yay installation software and still need to use the test user created by the default shell script.

# Set icon double-click to start the program

- QQ.desktop content (for example, Ubuntu compatibility layer):

```ini '
[Desktop Entry]
Name=QQQ
Exec=/compat/ubuntu/opt/QQ/qq-no-sandbox-in-process-gpu %U
Terminal = false
Type=Application
Icon=/compat/ubuntu/usr/share/icons/hicolor/512x512/apps/qq.png
StartupWMMClass=QQ
Categories = Network
Comment=QQQ
MimeType =x-scheme-handler/tencent;
````

- Chrome.desktop content (for example, Ubuntu compatible layer):

```ini '
[Desktop Entry]
Version = 1.0
Type=Application
Name=Chrome
Comment=
Exec=/compat/ubuntu/opt/google/chrome/chrome-no-sandbox-in-process-gpu
Icon=/compat/ubuntu/opt/google/chrome/project_logo_256.png
Path=
Terminal = false
StartupNotify=false
````

# Run Chrome

```sh '
#wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb # no proxy software, direct connection. It's already on Ubuntu compatibility.
#apt install./google-chrome-stable_current_amd64.deb # is already in Ubuntu compatibility layer at this time.
````

```sh '
# /usr/bin/google-chrome-stable-no-sandbox-no-zygote-in-process-gpu # is already in Ubuntu compatibility layer.
````

# Proxy software (for example, clash for window)

The Linux Compatibility Layer proxy software also affects the network status of FreeBSD, so that you can install clash for windows directly on the Compatibility Layer, and you can use the Agent to access the website as if you set the Agent. Normal installation configuration is sufficient.

# Linux Compatible Layer Network (Linux QQQ without Network)

If this machine has an Ethernet card em0, and a wireless card wlan0. However, using a wlan0 network, the Linux Compatibility Layer may have no network. Because FreeBSD em0 corresponds to the eth0, wlan0 corresponds to eth1 and so on. However, the Linux Compatibility Layer does not automatically identify which is netted and defaults on an eh0.

So, if Ethernet em0 is useless, use wlan0, this is when you're giving a non-observed Ethernet em0 just to name a non-observed ip:

- Temporary set-up (relaunch effective): `#ifconfig em0192.168.111.1 '
- Permanent setting: i.e., the addition of FreeBSD `/etc/rc.conf ' (without prejudice to the normal use of the card):

```sh '
#ifconfig_em0_lias0= "inet 192 168.11.1 netmask 255255.255.0"
````

`192.168.11.1 ' , above, for undistributed false IP, you can set yourself up as something else.

# Chinese input

Place `.profile ' under `/home ' under the compatible `/ ' directory:

```sh '
Export LANG=zh_CN.UTF-8
Export LANGUAGE=zh_CN.UTF-8
LC_ALL=zh_CN.UTF-8

=m=fcitx'
I'm sorry.
QT_IM_MODULE=fcitx
````

If an error like sh: warning: setlocale: LC_ALL: cannott change locale (zh_CN.uTF-8) occurs. In the case of OpenSUSE, for example, the `glibc-lang ' and `glibc-locale ' packages were installed, and re-entry was sufficient after withdrawal from the compatibility layer. Other systems can search for similar packages, such as the CentOS compatibility layer, which should be installed at `glibc-locale-source ' , `glibc-langpack-zh ' .

# sysctl variable

```sh '
# # The cyborg #
````

You can list commonly used variables.
ã€‚