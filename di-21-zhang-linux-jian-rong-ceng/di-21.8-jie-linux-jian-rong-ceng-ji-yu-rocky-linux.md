# Section 21.8 Rocky Linux Compatibility Layer

FreeBSD is now officially related to Port.

The script reads as follows:

```sh '
#!/bin/sh

ROOT_DIR=/compat
DIST=rocky
DIST_FULLNAME = "Rocky Linux"
VER = 9
SUB_VER = 5
TIME_VER = "latest"
SORT = Base
FILE=Rocky-${VER}-Container-${SORT}.${TIME_VER}.x86_64.tar.xx
"SUBDIR"
URL =https://mirrors.ustc.edu.cn/${DIST}/${VER}.${SUB_VER}/images/x86_64
UPDATE_CMD=dnf makecache
UPGRADE_CMD=dnf upgrad-y
INSTALL_CMD=dnf install-y'
UPDATE = 1
UPGRADE = 1
INSTRAW = 1


♪ "Starting to install ♪
Sleep 0.5.


# Check.sh
"Checking productive motors"

If! "$(sysrc-n linux_enable)" = "yes" ; then
"Linux service is not available.
/Read ANSWER
Case {ANSWER} in
[Nn] [OO]| [Nn]
"You start linux service with service linux start."
"Sure to continue without enabling linux service?"
/Read ANSWER
Case {ANSWER} in
[Yy][Ee][Ss]|[Yy]]
"Warning: linux moudle not sustainable"
;
[Nn] [OO] [Nn]""]
"Enabling Linux Moudle"
== sync, corrected by elderman ==
;
*)
"Aborting."
Exit 4
;
That's it.
;
[Yy] [Ee] [S] [Yy]|"]
"Enabling Linux Moudle"
== sync, corrected by elderman ==
;
*)
"Aborting."
Exit 4
;
That's it.
F

"Starting Linux service."
It's not a good idea.

I'm sorry, but I'm sorry.
Install dbus now?
/Read ANSWER
Case {ANSWER} in
[Nn] [OO]| [Nn]
"Abort.
Exit 2
;
[Yy] [Ee] [S] [Yy]|"]
"Installing dbus."
Pkg install-y dbus
;
*)
"Aborting."
Exit 4
;
That's it.
F

If [! "$(sysrc-n dbus_enable)" = "yes" ; then
"Dbus is not available.
/Read ANSWER
Case {ANSWER} in
[Nn] [OO]| [Nn]
"You MUST start dbus with service dbus start."
"Sure to continue without enabling dbus?"
/Read ANSWER
Case {ANSWER} in
[Yy][Ee][Ss]|[Yy]]
"Warning: dbus service not available"
;
[Nn] [OO] [Nn]""]
"Enabling dbus service."
"YES."
;
*)
"Aborting."
Exit 4
;
That's it.
;
[Yy] [Ee] [S] [Yy]|"]
"Enabling dbus service."
"YES."
;
*)
"Aborting."
Exit 4
;
That's it.
F

If [-z"(ps aux grep-p dbus grep-v grep)"
"Starting dbus service"
It's a service dbus start.
F

If it's not "YES"
"Nollfs should be loaded when.
/Read ANSWER
Please ANSWER in
[Nn] [OO]| [Nn]
"You MUST loads with "kldload-vfuls"
"Sure to continue without setting wilds to YES?"
/Read ANSWER
Please ANSWER in
[Yy][Ee][Ss]|[Yy]]
"Warning: non-loads not set"
;
[Nn] [OO] [Nn]""]
"Setting Nulls_load to yes."
"YES"
;
*)
"Aborting."
Exit 4
;
That's it.
;
[Yy] [Ee] [S] [Yy]|"]
"Setting Nulls_load to yes."
"YES"
;
*)
"Aborting."
Exit 4
;
That's it.
F

If!
"Loaing bullfs module."
Kldload-v Nulls
F


# Pre_extract.sh #


echo "${DIST_FULNAME} will be included in ${ROOT_DIR}/${DIST}

"Downloading Basic System"
Fetch ${URL}/${FILE}

"Exacting Basic System"
Sleep 0.5.
mkdir-p${ROOT_DIR}/${DIST}
t xvpf${FILE}$${SUBDIR:} -C${ROOT_DIR}/${DIST} --numeric-owner

"Mounting renewed data system"
Sleep 0.5.
echo "devfs ${ROOT_DIR}/${DIST}/dev Devfs rw, late 0" >/etc/fstab
epho "tmpfs ${ROOT_DIR}/${DIST}/dev/shmtmpfs rw, late, size=1g, Mode=17770" >/etc/fstab
epho "fdescfs $ {ROOT_DIR}/dev/fd fdescfs rw, late, linrdlnk 0">/etc/fstab
echo "linprocfs ${ROOT_DIR}/${DIST}/proc linprocfs rw, late 00"> /etc/fstab
echo "linsysfs${ROOT_DIR}/${DIST}/sys Linsysfsrw, late 0">/etc/fstab
epho "/tmp ${ROOT_DIR}/tmp Nullfs rw, late 0">/etc/fstab
#cho "/home ${ROOT_DIR}/${DIST}/home Nullfs rw, late 0" >/etc/fstab
"Mount-al."


# setup.sh
"Shoold $ {DIST_FULNAME}use Alibaba DNS or local resource.conf? ( (A)li | (l)ocal | (c)ancel)"
/Read ANSWER
Case {ANSWER} in
[Aa] [Ll] [Ii] [Aa]|"]
"Setting Alibaba DNS."
> $ {ROOT_DIR}/${DIST}/etc/resolv.conf
DNS_CONFIGURED=1
;
[Ll][Oo][Cc][Aa][Ll]| [Ll]]
"Using local reslov.conf."
cp / etc/resolv.conf {ROOT_DIR}/${DIST}/etc/resolv.conf
DNS_CONFIGURED=1
;
*)
"Cancred."
"You have to add $ {ROOT_DIR}/ etc/resolv.conf by yourself!"
DNS_CONFIGURED=0
;
That's it.

"Do you want to useus source for $US?
/Read ANSWER
Case {ANSWER} in
[Yy] [Ee] [S] [Yy]|"]
"Setting must source"
/bin/bash-c "sed \
I'm sorry.
== sync, corrected by elderman == @elder_man
I'm sorry.
/etc/yum.repos.d/rocky-extras.repo \
/etc/yum.repos.d/rocky.repo"
;
[Nn] [OO]| [Nn]
"Will not set up and software in case of unexplored time submission."
UPDATE = 0
UPGRADE = 0
INSTRAW = 0
;
*)
"Aborting."
Exit 4
;
That's it.

If [${DNS_CONFIGURED}=1]; then
If [${UPDATE} = 1]; then
"Updating $ {DIST_FULLNAME}"
/bin/bash-c "${UPDATE_CMD}"
F
If [${UPGRADE}=1]; then
"Upgrading $ {DIST_FULLNAME}"
/bin/bash-c
F
I'm sorry, else.
"DNS is not set, Skipping upward"
F

If [${DNS_CONFIGURED}=1]; then
If [${INSTALL} = 1]; then
"Installing vim."
/bin/bash-c
F
I'm sorry, else.
"DNS is not set, skipping integration"
F


"Claining up"
rm $ {FILE}

"Done."
"Now you can sing to $ {DIST_FULLNAME} with \choot {ROOT_DIR}/bin/bash\"
````

