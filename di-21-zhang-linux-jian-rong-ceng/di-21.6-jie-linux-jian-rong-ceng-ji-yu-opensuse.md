# Section 21.6 OpenSUSE Compatibility Layer


# OpenSUSE 15.5-shell script

Although the script is based on a dnf package manager, the opi automatically installs zypper to co-exist the zypper, but requires the user [to import zypper sources] (https://mirrors.tuna.tsinghua.edu.cn/help/opensuse/).


The script reads as follows:

```sh '
#/bin/sh

Rootdir=/compat/suse
url = "https://download.opensuse.org/repository/Virtualization:/containers:/images:/openSUSE-Tumbleweed/container/opensuse-tumbleweed-dnf-image.x86_64-lxc-dnf.tar.xxz"

"Begin to install last Opensuse Leap..."
"Check motors..."

♪ Check the linux motore
If [ "$(sysrc-n linux_enable)] = "NO"; then
"Linux module should be loaded."
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"linux module not loaded"
Exit 1
;
[Yy] [Ee] [S] [Yy]|"]
== sync, corrected by elderman ==
;
That's it.
F
"start linux."
It's not a good idea.

♪ Check dbus
If!
"dbus-daemon not found.
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"dbus not mentioned"
Exit 2
;
[Yy] [Ee] [S] [Yy]|"]
Pkg install-y dbus
;
That's it.
F

If ["sysrc-n dbus_enable"]!
"dbus should be able."
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"dbus not running"
Exit 2
;
[Yy] [Ee] [S] [Yy]|"]
== sync, corrected by elderman ==
;
That's it.
F
"Start dbus."
It's a service dbus start.

"now we will bootstrap openuse"

Fetch $ {url}
mkdir-p {rootdir}
I'm sorry, I'm sorry.
rm opensuse-leap-dnf-image.x86_64-lxc-dnf.tar.xxz

If it's not "YES"
"nullfs should read.
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"nulfs not load"
Exit 3
;
[Yy] [Ee] [S] [Yy]|"]
sysrc-f /boot/loader.conf nulls_load=yes
;
That's it.
F

If!
I'm sorry.
Kldload-v Nulls
F

"Mount some fs for linux"
> > ecc/fstab
epho "tmpfs $ {rootdir}/dev/shmtmpfs rw, late, size=1g, Mode=17770" >/etc/fstab
>/etc/fstab
>/etc/fstab
> et ecc/fstab
Echo "/tmp ${rootdir}/tmp Nullfs rw, late 0" >/etc/fstab
#cho "/home {rootdir}/home Nulls rw, late 0" > /etc/fstab
"Mount-al."

"for effect, we should change 'compat.linux.osrelease'.continue?"
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"clos to access"
Exit 4
;
[Yy] [Ee] [S] [Yy]|"]
> / etc/syscl.conf
It's a good time, sysctl compat.linux.osrelease=6.2.10
;
That's it.
"complete!"
echo "to use: chorot $ {rootdir}/bin/bash"
echo"
"I will set back.
"Continue?"
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"Set your opensuse by yourself.by!"
Exit 0
;
[Yy] [Ee] [S] [Yy]|"]
>${rootdir}/etc/resolv.conf

"I will remain open nano tar and vim"
/bin/bash-c "dnf update & dnf install-y open nano tar vim"


"all done."
"Now you can run 'choot /compat/suse//bin/bash'Into Opensuse "

;
That's it.
````

# OpenSUSE Tumbleweed-shell script

>This section is problematic and is not available for the time being.


Tumbleweed, the windroller, is a rolling update of OpenSUSE.

```sh '
#fetch http://book.bsi don't know.
♪ sh sset.sh ♪
````

The script reads as follows:

```sh '
#/bin/sh

Rootdir=/compat/suse
url = "https://download.opensuse.org/repository/Virtualization:/containers:/images:/openSUSE-Tumbleweed/container/opensuse-tumbleweed-dnf-image.x86_64-lxc-dnf.tar.xxz"

"Begin to install OpenSUSE Tumbleweed..."
"Check motors..."

♪ Check the linux motore
If [ "$(sysrc-n linux_enable)] = "NO"; then
"Linux module should be loaded."
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"linux module not loaded"
Exit 1
;
[Yy] [Ee] [S] [Yy]|"]
== sync, corrected by elderman ==
;
That's it.
F
"start linux."
It's not a good idea.

♪ Check dbus
If!
"dbus-daemon not found.
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"dbus not mentioned"
Exit 2
;
[Yy] [Ee] [S] [Yy]|"]
Pkg install-y dbus
;
That's it.
F

If ["sysrc-n dbus_enable"]!
"dbus should be able."
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"dbus not running"
Exit 2
;
[Yy] [Ee] [S] [Yy]|"]
== sync, corrected by elderman ==
;
That's it.
F
"Start dbus."
It's a service dbus start.

"now we will bootstrap openuse"

Fetch $ {url}
mkdir-p {rootdir}
I'm sorry, I'm sorry.
rm opensuse-tumbleweed-dnf-image.x86_64-lxc-dnf.tar.xxz

If it's not "YES"
"nullfs should read.
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"nulfs not load"
Exit 3
;
[Yy] [Ee] [S] [Yy]|"]
sysrc-f /boot/loader.conf nulls_load=yes
;
That's it.
F

If!
I'm sorry.
Kldload-v Nulls
F

"Mount some fs for linux"
> > ecc/fstab
epho "tmpfs $ {rootdir}/dev/shmtmpfs rw, late, size=1g, Mode=17770" >/etc/fstab
>/etc/fstab
>/etc/fstab
> et ecc/fstab
Echo "/tmp ${rootdir}/tmp Nullfs rw, late 0" >/etc/fstab
#cho "/home {rootdir}/home Nulls rw, late 0" > /etc/fstab
"Mount-al."

"for effect, we should change 'compat.linux.osrelease'.continue?"
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"clos to access"
Exit 4
;
[Yy] [Ee] [S] [Yy]|"]
> / etc/syscl.conf
It's a good time, sysctl compat.linux.osrelease=6.2.10
;
That's it.
"complete!"
echo "to use: chorot $ {rootdir}/bin/bash"
echo"
"I will set back.
"Continue?"
Now, read answer
If you don't mind, case dollar in
[Nn] [OO]| [Nn]
"Set your opensuse by yourself.by!"
Exit 0
;
[Yy] [Ee] [S] [Yy]|"]
>${rootdir}/etc/resolv.conf

"I will remain open nano tar and vim"
/bin/bash-c "dnf update & dnf install-y open nano tar vim"


"all done."
"Now you can run 'choot /compat/suse//bin/bash'Into Opensuse "

;
That's it.
````

# Fragmentation and unfinished business

- zypper is not available when using the LXC Leap mirror. Similarly, dnf and zypper are not available when using openSUSE Tumbleweed. The problem doesn't affect our lap script, but it affects the second wind-rolling step, which makes it impossible to use it properly. Reported in [Bug] (https://bugzilla.openuse.org/show_bug.cgi?id=1213158).

For example, when trying to install Vim, you encounter an error message.

```sh '
Establishment of perl-5.36.1-1.2.x86_64i'm sorry.
Error's Subprocessg fed.c Error: RPM failed: Command revealed with status 1
````

In LXC Leap, replace rpm-ndb with rpm can solve this problem and dnf will not experience this problem. The problem is zypper-specific. However, in openSUSE Tumbleweed LXC, both dnf and zypper have this problem, and the replacement rpm-ndb cannot be resolved.


。