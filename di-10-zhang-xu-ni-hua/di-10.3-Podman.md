# Section 10.3 Podman

Podman was designed to replace Docker, and it's almost identical to Docker's orders, and you can even set aliases for use.

Podman's realization on FreeBSD is based on Jail, and you can view the current container by command `jls ' .

# Install Podman

We install sysutils/podman-suet, which will help us install sysutils/buildah, sysutils/podman and sysutils/skopeo.

- Install with pkg

```sh '
# pkg install podman-kite
````

- Install with Ports:

```sh '
#cd /usr/ports/sysutils/podman-site/
# Make install clean
````

- View installation configuration:


```sh '
root@ykla: #pkginfo-D podman
Podman-5.3.2_2:
On installation: # When installed:
The FreeBSD port of the Podman container engine is important and should be
You know, used for evaluation and testing processes only.
# FreeBSD ported version of Podman container engine is experimental and available for evaluation and testing only.

US$Sudo Podman run-rm quick.io/Dougrabson/hello

Podman can start contacts after a host is rebooted.
# Podman can restart the container after the host is restarted. To enable this function, please execute:

US$Sysrc Podman_enable=YES

And start the conversation with a current policy:
# And start the container with a restart strategy:

You know, I'm not sure if you're gonna be able to do that.

It is possible to run many Linux contacts using FreeBSD's Linux integration:
# Many Linux container mirrors can be run using the FreeBSD simulation:

US$Sysrc llinux_enable=YES
That's what I'm talking about.
You know, I'm not sure what you're talking about.
NAME = "Alpine Linux"

On upgrade from Podman < 4.7.1 #
In Podman-4.7.0 and later, complexion creds moved from
/run/containers/0/auth.json to/root/.config/containers/auth.json.
The file to the new location or just re-entity to the requited registrations.
# In Podman 4.7.0 and more, the certificate of certification of the registration form has been located from
#/run/containers/0/auth.json moved to /root/.config/containers/auth.json.
# You can move the file to a new location or re-enter the required mirror registration form.
````


Configure fstab

Write the following rows to `/etc/fstab '

```sh '
fdesc /dev/fd fdescfs rw 0 0
````

The following orders are then executed to give immediate effect to them:

```sh '
# Mount-t fdescfs fdesc/dev/fd
````

Configure the network

- Copy Profile

```sh '
#cp /usr/local/etc/containers/pf.conf.sample/etc/pf.conf
````

- Edit `/etc/pf.conf ', replace `ix0 ' with the webcard you currently use, using the command `ifconfig ' to view

```sh '
= "ix0"
= "ix0"
````

- Start pf

```sh '
# kldload pf # load the kernel module only this time and automatically later
# echo 'net.pf.f.filter_local=1'> /etc/syscl.conf.local # re-direct the connection from the container's mainframe to the inside of the container
# sysctl net.pf.filter_local=1 #
♪ service pf available ♪
♪ service pf start ♪
````

# Create zfs storage pool

- If you use zfs:

```sh '
# zfs create-o mountain point=/var/db/containers zroot/containers
````

- If you don't ** use zfs:

```sh '
# sed-I .bak-e 's/driver = "zfs"/driver = "vfs"///usr/local/etc/containers/storage.conf
````


# Start service

```sh '
♪ Service Linux enough
# Service Linux start
♪ Service Podman able
# Service Podman start
````


# Test Ubuntu mirror

- Test to pull Ubuntu

```sh '
# Podman pull-os=linux docker.io/library/ubuntu:latest
Trying to pull docker.
Getting within our own signs
Coping blue 0622 fac788 done
Coping config a045e2ce6 done
Wrringing humans to age determination
a0e45e2ce6e6e22e73185397d162a64ffff2f80a41c597015cab05d9a7b5913ce
````

- View the currently pulled mirror

```sh '
#podman images
EROSITORY TAG IMAGE ID CREATED SIZE
Docker.io/library/ubuntu latest a0e45e2ce6e6 3 weeks ago 80.6 MB
````

- Print system version (5 lines before printing only)

```sh '
# Podman run-os=linux ubuntu/usr/bin/cat "/etc/os-release"
PRETTY_NAME="Ubuntu 24.04.2 LTS"
NAME = "Ubuntu"
Version_ID=24.04
Version = "24.04.2 LTS"
Version_CODENAME=noble
````

- Enter the container.

```sh '
root@ykla: ~ #podman run-it-os=linux ubuntu / bin/bash #in the container
Root@3b6d47dea81e:/ #apt update # is already inside the container
Get: http://archive.ubuntu.com/ubuntunobleInRelease [256 kB]
Get: 2 http://security.ubuntu.com/ubuntunoble-security InRelease [126 kB]

...The following omissions ...
root@3b6d47dea81e:/ #exit# exit container
I don't know.
# Back to the host
````

# Test nginx packaging packaged by FreeBSD maintainer


```sh '
# Podman pull time.io/Dougrabson/nginx
# Podman run-d-name mynginx-p 8080:80 hours.
````

Opens the web page `http://ip:8080 ' to view the test nginx page.

More use

- Check the log.

```sh '
# Podman logs container name
````

- See status
```sh '
root@ykla: ~ #podman ps # View currently running containers
CONTAINER ID IMAGE COMMAND CREATEDS PORTS NAMES
c088c9c56fc quay.io/dougrabson/nginx:latest /usr/local/sbin/n 3 minutes agoup 3 minutes 0.0.0.0:8080-> tcp mynginx
root@ykla: ~ #podman ps-a # View all states, including the running failed container
CONTAINER ID IMAGE COMMAND CREATED STATUS POTS NAMES
e8ea65b7e6c9 docker.io/library/nginx:latest nginx-g daemon o 17 minutes ago Exited (0) 292 years ago 0.0.0.0:8080->80/tcp nginx-test
c088c9c56fc quay.io/dougrabson/nginx:latest/usr/local/sbin/n 3 minutes ago 3 minutes 0.0.0.0:8080-> tcp mynginx
````

- Stop and delete containers

```sh '
# Podman stop container name
# Podman rm container name
````

- Delete mirror (must remove the quoted container before deleting the mirror)

```sh '
# Podman rmi mirror name
````

# Pull FreeBSD

```sh '
#Podman pull docker://freebsd/freebsd-runtime 14.2
````

See also [freebsd/freebsd-runtime] (https://hub.docker.com/r/freebsd/freebsd-runtime/tags)

# References

- [Podman Information Systems] (https://podman.io/docs/institution), official installed curriculum
- [Install Podman and run Containers in FreeBSD 14] (https://cloudspinx.com/install-podman-and-run-containers-in-freebsd/)
