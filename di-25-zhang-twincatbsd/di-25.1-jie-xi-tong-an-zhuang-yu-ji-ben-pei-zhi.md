# Section 25.1 TwinCAT/BSD system installation and basic configuration

# Profile

TwinCAT/BSD is an operating system under the control of the FreeBSD PLC developed by Beforth. Individuals who do not use their functionality are completely free of charge, and Befou supports third-party hardware installation, except that the license fee is based on the top PLC charge: the license is based on hardware performance, the normal PLC is P40/P50, a standard that, if a basic license $1,500, third-party hardware is based on P90 and the same function is around $600.

For further information:

- [GPU Direct Access] (https://github.com/FreeBSD-Ask/Freebsd-journal-cn/blob/main/203-0304/GPU%20Passthrough.md)
- [TwinCAT/BSD for Industrial PCs] (https://www.beckhoff.com/en/products/ipc/software-and-tools/twincat-bsd/)


# Download

<https://www.beckhoff.com/en-us/search-results/?q=bsd>

[TCBSD](./.gitbook/assets/tcbsd.png)

Click `ZIP ' to download. **Note: Registration is required to download. **

ZIP decompresses the "TCBSD-x64-13-92446.so" first.

# Create virtual hard drives and write mirrors

The TCBSD official mirror was actually made of `dd ' , which corresponded to the img mirror of FreeBSD, so the virtual machine could not be directly identified. A curve is needed to save the country by creating a virtual VHD hard drive, which is then mounted on a virtual machine for installation.

First right-key single "this computer", choose management -- disk management -- operation -- create VHD.

[TCBSD](./.gitbook/assets/t1.png)

Harddisk size of 1GB is sufficient, more useless, for writing mirrors. Other configurations refer to my settings.

[TCBSD](./.gitbook/assets/t2.png)

As you can see, there's an extra `disk 2 ' , we're on the left side of the right-key unit -- choose `initialized disk'. (**Note that I had two hard drives, `disk 0 ' and `disk 1 ' respectively. **

[TCBSD](./.gitbook/assets/t3.png)

Select the default parameter. Format disk 2 with the GPT partition table.

[TCBSD](./.gitbook/assets/t4.png)

Right-click " New Simple Volume " on the right side of the machine, and the rest will keep the default configuration.

[TCBSD](./.gitbook/assets/t5.png)

There's a `New Volume F':

[TCBSD](./.gitbook/assets/t6.png)

[TCBSD](./.gitbook/assets/t7.png)

Open rufus will automatically recognize our new volume F, select the depressive mirror TCBSD-x64-13-92446.iso, click "start" and wait longer while you last update the partition table.

[TCBSD](./.gitbook/assets/t8.png)

Returns disk management, select Operations - Rescan Disk. ** Otherwise the virtual machine below cannot load disk 2. **

[TCBSD](./.gitbook/assets/t9.png)

You can see that disk 2 has been written into the mirror:

[TCBSD](./.gitbook/assets/t10.png)

# VMware VMware Workstation Pro Install TCBS

First, we create an empty virtual machine template in a normal way, then click on the Virtual Machine Settings -- Add -- Hard Disk. Click next step:

[TCBSD](./.gitbook/assets/t11.png)

Keep default is sufficient:

[TCBSD](./.gitbook/assets/t12.png)

Select the third "Use Physical Disk":

[TCBSD](./.gitbook/assets/t13.png)

Select disk 2 here and use the entire partition:

[TCBSD](. . .getbook/assets/t14.png)

Keep default is sufficient:

[TCBSD](./.gitbook/assets/t15.png)

Checks the size and name of the disk, and the wrong selection cannot start.

[TCBSD](./.gitbook/assets/t16.png)

UEFI:

[TCBSD](./.gitbook/assets/t17.png)

Save above configuration to start:

[TCBSD](./.gitbook/assets/t18.png)

Start installation:

[TCBSD](./.gitbook/assets/t19.png)

Select the disk to install, and the size will determine which:

[TCBSD](./.gitbook/assets/t20.png)

Select "Yes" to start installation:

[TCBSD](./.gitbook/assets/t21.png)

Enter the password for `Administrator ':

[TCBSD](./.gitbook/assets/t22.png)

Enter again the password for `Administrator ':

[TCBSD](./.gitbook/assets/t23.png)

Installation started:

[TCBSD](./.gitbook/assets/t24.png)

Hint installation complete:

[TCBSD](./.gitbook/assets/t25.png)

Select "reboot" to restart into the installed system:

[TCBSD](./.gitbook/assets/t26.png)


# root

The default user name is `Administrator ' , whose password you set when installed. Double All other PLC default passwords are `1 ' .

Set root password first:

```sh '
Oh, my God.
````

Then you can.

```sh '
Doas su
````

# Login Web Interface

The network link is NAT, which cannot be accessed by a test bridge.

View the current IP with `ifconfig ' and then open the host browser to enter:

`ifconfig ' output IP content!

The ip shown here in `ifconfig ' is `192.168.245.138 ' and the address I should have visited is `https://192.168.245.138 ' . (Note: **https** not http, which cannot be accessed!)

Enter the username `Administrator ' and password to log in:

[TCBSD](./.gitbook/assets/tcbsd1.png)

[TCBSD](./.gitbook/assets/tcbsd2.png)


# Fragmentation and unfinished business

# # After setting static IPs there are two IPs on the net

Sets a static IP for a webcard that will have two IPs: one static IP and one DHCP service allocation. This was caused by the failure of the dhcpccd service, which was launched by the pilot, to change /etc/rc.conf to address:

Modify or add:

```sh '
"...denyinterfaces igb0"
````

For `dhcpcd_flags ' read `--denyinterfaces igb0 ' `igb0 ' , change the name of the card that requires static IP.

ã€‚