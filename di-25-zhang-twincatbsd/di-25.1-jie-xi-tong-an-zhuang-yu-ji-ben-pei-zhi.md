# Section 25.1 TwinCAT/BSD system installation and basic configuration

# Profile

TwinCAT/BSD is an operating system under the control of the FreeBSD PLC developed by Beforth. Individuals who do not use their functionality are completely free of charge, and Befou supports third-party hardware installation, except that the license fee is based on the top PLC charge: the license is based on hardware performance, the normal PLC is P40/P50, a standard that, if a basic license $1,500, third-party hardware is based on P90 and the same function is around $600。

For further information:

- [GPU DIRECT] (https://github.com/FreeBSD-Ask/freebsd-journal-cn/blob/main/203-0304/GPU%20Passthrough.md)
- [TwinCAT/BSD for Industrial PCs] (https://www.beckhoff.com/en/products/ipc/software-and-tools/twincat-bsd/)


# Download

<https://www.beckhoff.com/en-us/search-results/?q=bsd>

[TCBSD](./.gitbook/assets/tcbsd.png)

CLICK __CODESPAN_0_ TO DOWNLOAD. **NOTE: REGISTRATION IS REQUIRED TO DOWNLOAD. **

ZIP decompresses the "TCBSD-x64-13-92446.so" first。

# Create virtual hard drives and write mirrors

TCBSD's official mirror is actually made of __CODESPAN_0, which corresponds to the img image of FreeBSD, so the virtual machine cannot be directly identified. A curve is needed to save the country by creating a virtual VHD hard drive, which is then mounted on a virtual machine for installation。

FIRST RIGHT-KEY SINGLE "THIS COMPUTER", CHOOSE MANAGEMENT -- DISK MANAGEMENT -- OPERATION -- CREATE VHD。

[TCBSD](./.gitbook/assets/t1.png)

HARDDISK SIZE OF 1GB IS SUFFICIENT, MORE USELESS, FOR WRITING MIRRORS. OTHER CONFIGURATIONS REFER TO MY SETTINGS。

[TCBSD](./.gitbook/assets/t2.png)

YOU CAN SEE THAT THERE'S AN EXTRA __CODESPAN_0, AND WE'RE IN THE LEFT SIDE OF THE RIGHT-KEY UNIT -- SELECT " INITIALIZING DISK." (** NOTE THAT I HAD TWO HARD DRIVES, __CODESPAN_1 AND __CODESPAN_2_, RESPECTIVELY. **

[TCBSD](./.gitbook/assets/t3.png)

SELECT THE DEFAULT PARAMETER. FORMAT DISK 2 WITH THE GPT PARTITION TABLE。

[TCBSD](./.gitbook/assets/t4.png)

Right-click " New Simple Volume " on the right side of the machine, and the rest will keep the default configuration。

[TCBSD](./.gitbook/assets/t5.png)

YOU CAN SEE A CODESPAN_0:

[TCBSD](./.gitbook/assets/t6.png)

[TCBSD](./.gitbook/assets/t7.png)

Open rufus will automatically recognize our new volume F, select the depressive mirror TCBSD-x64-13-92446.iso, click "start" and wait longer while you last update the partition table。

[TCBSD](./.gitbook/assets/t8.png)

Returns disk management, select Operations - Rescan Disk. ** Otherwise the virtual machine below cannot load disk 2. **

[TCBSD](./.gitbook/assets/t9.png)

You can see that disk 2 has been written into the mirror:

[TCBSD](./.gitbook/assets/t10.png)

# VMware VMware Workstation Pro Install TCBS

First, we create an empty virtual machine template in a normal way, then click on the Virtual Machine Settings -- Add -- Hard Disk. Click next step:

[TCBSD](./.gitbook/assets/t11.png)

Keep default is sufficient:

[TCBSD](./.gitbook/assets/t12.png)

Select the third "Use Physical Disk":

[TCBSD](./.gitbook/assets/t13.png)

Select disk 2 here and use the entire partition:

[TCBSD](. . .getbook/assets/t14.png)

Keep default is sufficient:

[TCBSD](./.gitbook/assets/t15.png)

Checks the size and name of the disk, and the wrong selection cannot start。

[TCBSD](./.gitbook/assets/t16.png)

UEFI:

[TCBSD](./.gitbook/assets/t17.png)

Save above configuration to start:

[TCBSD](./.gitbook/assets/t18.png)

Start installation:

[TCBSD](./.gitbook/assets/t19.png)

Select the disk to install, and the size will determine which:

[TCBSD](./.gitbook/assets/t20.png)

Select "Yes" to start installation:

[TCBSD](./.gitbook/assets/t21.png)

ENTER THE PASSWORD FOR __CODESPAN_0_:

[TCBSD](./.gitbook/assets/t22.png)

ENTER __CODESPAN_0_ PASSWORD AGAIN:

[TCBSD](./.gitbook/assets/t23.png)

Installation started:

[TCBSD](./.gitbook/assets/t24.png)

Hint installation complete:

[TCBSD](./.gitbook/assets/t25.png)

select "reboot" to restart into the installed system:

[TCBSD](./.gitbook/assets/t26.png)


# root

THE DEFAULT USERNAME IS __CODESPAN_0, WHOSE PASSWORD YOU SET AT THE TIME OF INSTALLATION. DOUBLE ALL OTHER PLC DEFAULT PASSWORDS ARE __CODESPAN_1_。

set root password first:

```sh
doas passwd root
```

Then you can

```sh
doas su
```

# Login Web Interface

THE NETWORK LINK IS NAT, WHICH CANNOT BE ACCESSED BY A TEST BRIDGE。

VIEW THE CURRENT IP WITH __CODESPAN_0_ AND THEN OPEN THE HOST BROWSER INPUT:

__CODESPAN_0_OUTPUT IP CONTENT

I have here the ip of CODESPAN_0, which I should have visited: CODESPAN_2_. (Note: **https** not http, which cannot be accessed!)

ENTER THE USERNAME __CODESPAN_0_ AND PASSWORD TO LOG IN:

[TCBSD](./.gitbook/assets/tcbsd1.png)

[TCBSD](./.gitbook/assets/tcbsd2.png)


# Fragmentation and unfinished business

# # AFTER SETTING STATIC IPS THERE ARE TWO IPS ON THE NET

Sets a static IP for a webcard that will have two IPs: one static IP and one DHCP service allocation. This was caused by the failure of the dhcpccd service, which was launched by the pilot, to change /etc/rc.conf to address:

Modify or add:

```sh
dhcpcd_flags="--denyinterfaces igb0"
```

CHANGE THE VALUE OF __CODESPAN_0 FROM __CODESPAN_1 TO __CODESPAN_2_. __CODESPAN_3_ PLEASE CHANGE THE NAME OF THE CARD TO FIT THE STATIC IP。

