# Section 13.5 BSD init management services

# Base

FreeBSD uses the traditional BSD init management system service.

>** Skills**
>
>If these services are in the background for a long period of time: usually called `xxd ' . For example, `sshd ' , `ntpd ' , the little demon symbol “[daemon]” on behalf of FreeBSD” (https://www.freebsd.org/copyright/daemon/). They're called "services" under Windows.

- Start service: #service xxstart '
- Stop service: #service xx stop '
- Restart service: #service xx current '
- Add service and start-up: `service xx capable ' (not all, still deficient)
- Disable starter: #service xxdisable
- Delete the start item: `#service xx delete '

Note**
>
> Keywords `enable ' , `disable ' , `delete ' first appeared in 13.0, see [Add new rc keywords:enable, disable, delete] (https://reviews.freebsd.org/D17113]


The system service is defaulted to be unenabled after installation and the above commands cannot be executed, requiring the service to be opened first:

```sh '
#ee / etc/rc.conf
````

Add a line, `XXX_enable= "yes" , `XXX ' denotes the name of the service (in this case, for example, `nginx ' , `samba ' , etc.), which is a fixed format:

```sh '
XXX_enable
````

- You can also add by order:

```sh '
# Sysrc xx_enable #
````

or

```sh '
# With service xxenable #
````

- Disable service by command:

```sh '
# Sysrc xx_enable #
````

or

```sh '
# With service xx disable
````

> ** Hint**
>
> ```sh '
>sysrc XXX_enable= "yes"
> ````
>
>The above-mentioned command `YES', in which `"" (two double quotation marks in English) is not actually useful, and the system is automatically added if it is not capable of implementation (as in FreeBSSD 15.0). The same applies to `NO'.

The corresponding script path of the service is: #/usr/local/etc/rc.d/`

Of course, the scripts under `/etc/rc.d/` and `/usr/local/etc/rc.d/ ' may also be directly called.

- `# /usr/local/etc/rc.d/XXX reload '
- `# /usr/local/etc/rc.d/XXX stop '

If a service is not activated in `rc.conf ' but wants to be activated on an interim basis, then this can be done:

- # service XXX estart #
- # service XXX on top #


# Step

`rc.conf ' manages all system services. The relevant documents and paths are as follows:

1. The default configuration is in `/etc/defaults/rc.conf ' . ** This is a visual, not a retrofit, and basically each has a detailed description of its use. ** Renumber as `/etc/rc.conf ' .
The user-defined configuration is in `/etc/rc.conf ' . For example, if the system is to automatically start services such as ssh, ipfw, nginx, the document is to be modified. ** Note that `/etc/rc.conf ' has higher priority than `/etc/defaults/rc.conf ' ; i.e. `/etc/rc.conf ' will cover `/etc/defaults/rc.conf ' . **
3. The service script of the basic system is located at `/etc/rc.d/ ' . Service scripts for third-party applications are located in `/usr/local/etc/rc.d/ ' .

# # Switch off starter

`sdm_enable="YES" similar item.

- Activate script (default non-existent, self-created)

```sh '
/etc/rc.local
````

- Shutdown execution script (default does not exist, self-create)

```sh '
/etc/rc.shutdown.local
````

- Test.

```sh '
# /etc/rc.d/localstart
Starting local daemons:
````

## Query default `rc.conf ' configuration file

>** Skills**
>
> 'bsdconfig ' helps you quickly browse through the current configuration.

To query the default configuration, for example `fsck ' (filesystem check) is a common command:

````
Root@ykla:~grep fsck/etc/defaults/rc.conf
# May be changed to -f (or-f-y) to force a full fsck
♪ Set to YES to do fsck-y if the intimacy preen fails.
Fsck_y_flags=-Tfs:-R-T uffs:-R #
Attempt to run fsck in the background where possible.
♪ Time to wait (seconds) before starting the fsck.
Root@ykla:
````

You can see default parameters and notes. Change to `/etc/rc.conf ' if necessary.

Like what?

````
# sysrc fsck_y_enable=YES #
fsck_y_enable:
root@ykla: ~ # sysrc background_fsck=NO # Force the output of fsck information on console
Background_fsck:
````


# `periodic.conf'

FreeBSD defaults on cyclical tasks performed by means of `periodic ' commands, which are automatically called by `cron ' . The configuration and path associated with `periodic ' are as follows:

- The default configuration is in `/etc/defaults/periodic.conf ' .
- User-defined configuration is in `/etc/periodic.conf ' .
- The mission script of the basic system is located in `/etc/periodic/ ' .
- The mission script for third-party applications is located in `/usr/local/etc/periodic/ ' .

In the example of the path database `/var/db/local.database ' on which the `locate ' command relies,

The database is updated weekly by script `/etc/periodic/weekly/310.locate ' .

If you want to update it immediately, you can also execute the script directly:

```sh '
# local locate.database # trying to find locate.database
Locale: the local data '/var/db/locale.data' does not exist.

To create a new database, please run the following command as root:

/etc/periodic/weekly/310.locate
Root@ykla:~ /etc/periodic/weekly/310.locate # found no, hint to update the database

Building local data:
# Look again, find it
/var/db/locate.database
````


# Other profile

- Crontab: `cron ' configuration, at `/etc/crontab ' , see [crontab] (https://man.freebsd.org/cgi/man.cgi?crontab(5)).
- syslog.conf: System log configuration, at `/etc/syslog.conf ' , for information [syslog.conf] (https://man.freebsd.org/cgi/man.cgi?query=syslog.conf).
- loader.conf: System activation configuration (writing `rc.conf ' starts earlier than `rc.conf ' but may impede start-up), at `/boot/loader.conf ' , see [loader.conf] (https://man.freebsd.org/cgi/man.cgi?query=loader.conf).
- sysctl.conf: kernel parameter configuration, at `/etc/sysctl.conf ' , see [syscl.conf] (https://man.freebsd.org/cgi/man.cgi?query=sysctl.conf).
。